{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/home/donghai/Desktop/www/clover/public/source/admin/src/api/Gt.js","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/api/Gt.js","mtime":1574999400000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _typeof from \"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/@babel/runtime/helpers/esm/typeof\";\n\nvar gtInit = function (global, factory) {\n  \"use strict\";\n\n  if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n    // CommonJS\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error(\"Geetest requires a window with a document\");\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n}(typeof window !== \"undefined\" ? window : this, function (window, noGlobal) {\n  \"use strict\";\n\n  if (typeof window === 'undefined') {\n    throw new Error('Geetest requires browser environment');\n  }\n\n  var document = window.document;\n  var Math = window.Math;\n  var head = document.getElementsByTagName(\"head\")[0];\n\n  function _Object(obj) {\n    this._obj = obj;\n  }\n\n  _Object.prototype = {\n    _each: function _each(process) {\n      var _obj = this._obj;\n\n      for (var k in _obj) {\n        if (_obj.hasOwnProperty(k)) {\n          process(k, _obj[k]);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  function Config(config) {\n    var self = this;\n\n    new _Object(config)._each(function (key, value) {\n      self[key] = value;\n    });\n  }\n\n  Config.prototype = {\n    api_server: 'api.geetest.com',\n    protocol: 'http://',\n    type_path: '/gettype.php',\n    fallback_config: {\n      slide: {\n        static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\n        type: 'slide',\n        slide: '/static/js/geetest.0.0.0.js'\n      },\n      fullpage: {\n        static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\n        type: 'fullpage',\n        fullpage: '/static/js/fullpage.0.0.0.js'\n      }\n    },\n    _get_fallback_config: function _get_fallback_config() {\n      var self = this;\n\n      if (isString(self.type)) {\n        return self.fallback_config[self.type];\n      } else if (self.new_captcha) {\n        return self.fallback_config.fullpage;\n      } else {\n        return self.fallback_config.slide;\n      }\n    },\n    _extend: function _extend(obj) {\n      var self = this;\n\n      new _Object(obj)._each(function (key, value) {\n        self[key] = value;\n      });\n    }\n  };\n\n  var isNumber = function isNumber(value) {\n    return typeof value === 'number';\n  };\n\n  var isString = function isString(value) {\n    return typeof value === 'string';\n  };\n\n  var isBoolean = function isBoolean(value) {\n    return typeof value === 'boolean';\n  };\n\n  var isObject = function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  };\n\n  var isFunction = function isFunction(value) {\n    return typeof value === 'function';\n  };\n\n  var callbacks = {};\n  var status = {};\n\n  var random = function random() {\n    return parseInt(Math.random() * 10000) + new Date().valueOf();\n  };\n\n  var loadScript = function loadScript(url, cb) {\n    var script = document.createElement(\"script\");\n    script.charset = \"UTF-8\";\n    script.async = true;\n\n    script.onerror = function () {\n      cb(true);\n    };\n\n    var loaded = false;\n\n    script.onload = script.onreadystatechange = function () {\n      if (!loaded && (!script.readyState || \"loaded\" === script.readyState || \"complete\" === script.readyState)) {\n        loaded = true;\n        setTimeout(function () {\n          cb(false);\n        }, 0);\n      }\n    };\n\n    script.src = url;\n    head.appendChild(script);\n  };\n\n  var normalizeDomain = function normalizeDomain(domain) {\n    return domain.replace(/^https?:\\/\\/|\\/$/g, '');\n  };\n\n  var normalizePath = function normalizePath(path) {\n    path = path.replace(/\\/+/g, '/');\n\n    if (path.indexOf('/') !== 0) {\n      path = '/' + path;\n    }\n\n    return path;\n  };\n\n  var normalizeQuery = function normalizeQuery(query) {\n    if (!query) {\n      return '';\n    }\n\n    var q = '?';\n\n    new _Object(query)._each(function (key, value) {\n      if (isString(value) || isNumber(value) || isBoolean(value)) {\n        q = q + encodeURIComponent(key) + '=' + encodeURIComponent(value) + '&';\n      }\n    });\n\n    if (q === '?') {\n      q = '';\n    }\n\n    return q.replace(/&$/, '');\n  };\n\n  var makeURL = function makeURL(protocol, domain, path, query) {\n    domain = normalizeDomain(domain);\n    var url = normalizePath(path) + normalizeQuery(query);\n\n    if (domain) {\n      url = protocol + domain + url;\n    }\n\n    return url;\n  };\n\n  var load = function load(protocol, domains, path, query, cb) {\n    var tryRequest = function tryRequest(at) {\n      var url = makeURL(protocol, domains[at], path, query);\n      loadScript(url, function (err) {\n        if (err) {\n          if (at >= domains.length - 1) {\n            cb(true);\n          } else {\n            tryRequest(at + 1);\n          }\n        } else {\n          cb(false);\n        }\n      });\n    };\n\n    tryRequest(0);\n  };\n\n  var jsonp = function jsonp(domains, path, config, callback) {\n    if (isObject(config.getLib)) {\n      config._extend(config.getLib);\n\n      callback(config);\n      return;\n    }\n\n    if (config.offline) {\n      callback(config._get_fallback_config());\n      return;\n    }\n\n    var cb = \"geetest_\" + random();\n\n    window[cb] = function (data) {\n      if (data.status === 'success') {\n        callback(data.data);\n      } else if (!data.status) {\n        callback(data);\n      } else {\n        callback(config._get_fallback_config());\n      }\n\n      window[cb] = undefined;\n\n      try {\n        delete window[cb];\n      } catch (e) {}\n    };\n\n    load(config.protocol, domains, path, {\n      gt: config.gt,\n      callback: cb\n    }, function (err) {\n      if (err) {\n        callback(config._get_fallback_config());\n      }\n    });\n  };\n\n  var throwError = function throwError(errorType, config) {\n    var errors = {\n      networkError: '网络错误'\n    };\n\n    if (typeof config.onError === 'function') {\n      config.onError(errors[errorType]);\n    } else {\n      throw new Error(errors[errorType]);\n    }\n  };\n\n  var detect = function detect() {\n    return !!window.Geetest;\n  };\n\n  if (detect()) {\n    status.slide = \"loaded\";\n  }\n\n  var initGeetest = function initGeetest(userConfig, callback) {\n    var config = new Config(userConfig);\n\n    if (userConfig.https) {\n      config.protocol = 'https://';\n    } else if (!userConfig.protocol) {\n      config.protocol = window.location.protocol + '//';\n    }\n\n    jsonp([config.api_server || config.apiserver], config.type_path, config, function (newConfig) {\n      var type = newConfig.type;\n\n      var init = function init() {\n        config._extend(newConfig);\n\n        callback(new window.Geetest(config));\n      };\n\n      callbacks[type] = callbacks[type] || [];\n      var s = status[type] || 'init';\n\n      if (s === 'init') {\n        status[type] = 'loading';\n        callbacks[type].push(init);\n        load(config.protocol, newConfig.static_servers || newConfig.domains, newConfig[type] || newConfig.path, null, function (err) {\n          if (err) {\n            status[type] = 'fail';\n            throwError('networkError', config);\n          } else {\n            status[type] = 'loaded';\n            var cbs = callbacks[type];\n\n            for (var i = 0, len = cbs.length; i < len; i = i + 1) {\n              var cb = cbs[i];\n\n              if (isFunction(cb)) {\n                cb();\n              }\n            }\n\n            callbacks[type] = [];\n          }\n        });\n      } else if (s === \"loaded\") {\n        init();\n      } else if (s === \"fail\") {\n        throwError('networkError', config);\n      } else if (s === \"loading\") {\n        callbacks[type].push(init);\n      }\n    });\n  };\n\n  window.initGeetest = initGeetest;\n  return initGeetest;\n});\n\nexport default {\n  gtInit: gtInit\n};",{"version":3,"sources":["/home/donghai/Desktop/www/clover/public/source/admin/src/api/Gt.js"],"names":["gtInit","global","factory","module","exports","document","w","Error","window","noGlobal","Math","head","getElementsByTagName","_Object","obj","_obj","prototype","_each","process","k","hasOwnProperty","Config","config","self","key","value","api_server","protocol","type_path","fallback_config","slide","static_servers","type","fullpage","_get_fallback_config","isString","new_captcha","_extend","isNumber","isBoolean","isObject","isFunction","callbacks","status","random","parseInt","Date","valueOf","loadScript","url","cb","script","createElement","charset","async","onerror","loaded","onload","onreadystatechange","readyState","setTimeout","src","appendChild","normalizeDomain","domain","replace","normalizePath","path","indexOf","normalizeQuery","query","q","encodeURIComponent","makeURL","load","domains","tryRequest","at","err","length","jsonp","callback","getLib","offline","data","undefined","e","gt","throwError","errorType","errors","networkError","onError","detect","Geetest","initGeetest","userConfig","https","location","apiserver","newConfig","init","s","push","cbs","i","len"],"mappings":"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","sourcesContent":["\r\nvar gtInit = (function (global, factory) {\r\n  \"use strict\";\r\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n    // CommonJS\r\n    module.exports = global.document ?\r\n      factory(global, true) :\r\n      function (w) {\r\n        if (!w.document) {\r\n          throw new Error(\"Geetest requires a window with a document\");\r\n        }\r\n        return factory(w);\r\n      };\r\n  } else {\r\n    factory(global);\r\n  }\r\n})(typeof window !== \"undefined\" ? window : this, function (window, noGlobal) {\r\n  \"use strict\";\r\n  if (typeof window === 'undefined') {\r\n    throw new Error('Geetest requires browser environment');\r\n  }\r\n  var document = window.document;\r\n  var Math = window.Math;\r\n  var head = document.getElementsByTagName(\"head\")[0];\r\n\r\n  function _Object(obj) {\r\n    this._obj = obj;\r\n  }\r\n\r\n  _Object.prototype = {\r\n    _each: function (process) {\r\n      var _obj = this._obj;\r\n      for (var k in _obj) {\r\n        if (_obj.hasOwnProperty(k)) {\r\n          process(k, _obj[k]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n  };\r\n  function Config(config) {\r\n    var self = this;\r\n    new _Object(config)._each(function (key, value) {\r\n      self[key] = value;\r\n    });\r\n  }\r\n\r\n  Config.prototype = {\r\n    api_server: 'api.geetest.com',\r\n    protocol: 'http://',\r\n    type_path: '/gettype.php',\r\n    fallback_config: {\r\n      slide: {\r\n        static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\r\n        type: 'slide',\r\n        slide: '/static/js/geetest.0.0.0.js'\r\n      },\r\n      fullpage: {\r\n        static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\r\n        type: 'fullpage',\r\n        fullpage: '/static/js/fullpage.0.0.0.js'\r\n      }\r\n    },\r\n    _get_fallback_config: function () {\r\n      var self = this;\r\n      if (isString(self.type)) {\r\n        return self.fallback_config[self.type];\r\n      } else if (self.new_captcha) {\r\n        return self.fallback_config.fullpage;\r\n      } else {\r\n        return self.fallback_config.slide;\r\n      }\r\n    },\r\n    _extend: function (obj) {\r\n      var self = this;\r\n      new _Object(obj)._each(function (key, value) {\r\n        self[key] = value;\r\n      })\r\n    }\r\n  };\r\n  var isNumber = function (value) {\r\n    return (typeof value === 'number');\r\n  };\r\n  var isString = function (value) {\r\n    return (typeof value === 'string');\r\n  };\r\n  var isBoolean = function (value) {\r\n    return (typeof value === 'boolean');\r\n  };\r\n  var isObject = function (value) {\r\n    return (typeof value === 'object' && value !== null);\r\n  };\r\n  var isFunction = function (value) {\r\n    return (typeof value === 'function');\r\n  };\r\n  var callbacks = {};\r\n  var status = {};\r\n  var random = function () {\r\n    return parseInt(Math.random() * 10000) + (new Date()).valueOf();\r\n  };\r\n  var loadScript = function (url, cb) {\r\n    var script = document.createElement(\"script\");\r\n    script.charset = \"UTF-8\";\r\n    script.async = true;\r\n    script.onerror = function () {\r\n      cb(true);\r\n    };\r\n    var loaded = false;\r\n    script.onload = script.onreadystatechange = function () {\r\n      if (!loaded &&\r\n        (!script.readyState ||\r\n          \"loaded\" === script.readyState ||\r\n          \"complete\" === script.readyState)) {\r\n\r\n        loaded = true;\r\n        setTimeout(function () {\r\n          cb(false);\r\n        }, 0);\r\n      }\r\n    };\r\n    script.src = url;\r\n    head.appendChild(script);\r\n  };\r\n  var normalizeDomain = function (domain) {\r\n    return domain.replace(/^https?:\\/\\/|\\/$/g, '');\r\n  };\r\n  var normalizePath = function (path) {\r\n    path = path.replace(/\\/+/g, '/');\r\n    if (path.indexOf('/') !== 0) {\r\n      path = '/' + path;\r\n    }\r\n    return path;\r\n  };\r\n  var normalizeQuery = function (query) {\r\n    if (!query) {\r\n      return '';\r\n    }\r\n    var q = '?';\r\n    new _Object(query)._each(function (key, value) {\r\n      if (isString(value) || isNumber(value) || isBoolean(value)) {\r\n        q = q + encodeURIComponent(key) + '=' + encodeURIComponent(value) + '&';\r\n      }\r\n    });\r\n    if (q === '?') {\r\n      q = '';\r\n    }\r\n    return q.replace(/&$/, '');\r\n  };\r\n  var makeURL = function (protocol, domain, path, query) {\r\n    domain = normalizeDomain(domain);\r\n\r\n    var url = normalizePath(path) + normalizeQuery(query);\r\n    if (domain) {\r\n      url = protocol + domain + url;\r\n    }\r\n\r\n    return url;\r\n  };\r\n  var load = function (protocol, domains, path, query, cb) {\r\n    var tryRequest = function (at) {\r\n\r\n      var url = makeURL(protocol, domains[at], path, query);\r\n      loadScript(url, function (err) {\r\n        if (err) {\r\n          if (at >= domains.length - 1) {\r\n            cb(true);\r\n          } else {\r\n            tryRequest(at + 1);\r\n          }\r\n        } else {\r\n          cb(false);\r\n        }\r\n      });\r\n    };\r\n    tryRequest(0);\r\n  };\r\n  var jsonp = function (domains, path, config, callback) {\r\n    if (isObject(config.getLib)) {\r\n      config._extend(config.getLib);\r\n      callback(config);\r\n      return;\r\n    }\r\n    if (config.offline) {\r\n      callback(config._get_fallback_config());\r\n      return;\r\n    }\r\n    var cb = \"geetest_\" + random();\r\n    window[cb] = function (data) {\r\n      if (data.status === 'success') {\r\n        callback(data.data);\r\n      } else if (!data.status) {\r\n        callback(data);\r\n      } else {\r\n        callback(config._get_fallback_config());\r\n      }\r\n      window[cb] = undefined;\r\n      try {\r\n        delete window[cb];\r\n      } catch (e) {\r\n      }\r\n    };\r\n    load(config.protocol, domains, path, {\r\n      gt: config.gt,\r\n      callback: cb\r\n    }, function (err) {\r\n      if (err) {\r\n        callback(config._get_fallback_config());\r\n      }\r\n    });\r\n  };\r\n  var throwError = function (errorType, config) {\r\n    var errors = {\r\n      networkError: '网络错误'\r\n    };\r\n    if (typeof config.onError === 'function') {\r\n      config.onError(errors[errorType]);\r\n    } else {\r\n      throw new Error(errors[errorType]);\r\n    }\r\n  };\r\n  var detect = function () {\r\n    return !!window.Geetest;\r\n  };\r\n  if (detect()) {\r\n    status.slide = \"loaded\";\r\n  }\r\n  var initGeetest = function (userConfig, callback) {\r\n    var config = new Config(userConfig);\r\n    if (userConfig.https) {\r\n      config.protocol = 'https://';\r\n    } else if (!userConfig.protocol) {\r\n      config.protocol = window.location.protocol + '//';\r\n    }\r\n    jsonp([config.api_server || config.apiserver], config.type_path, config, function (newConfig) {\r\n      var type = newConfig.type;\r\n      var init = function () {\r\n        config._extend(newConfig);\r\n        callback(new window.Geetest(config));\r\n      };\r\n      callbacks[type] = callbacks[type] || [];\r\n      var s = status[type] || 'init';\r\n      if (s === 'init') {\r\n        status[type] = 'loading';\r\n        callbacks[type].push(init);\r\n        load(config.protocol, newConfig.static_servers || newConfig.domains, newConfig[type] || newConfig.path, null, function (err) {\r\n          if (err) {\r\n            status[type] = 'fail';\r\n            throwError('networkError', config);\r\n          } else {\r\n            status[type] = 'loaded';\r\n            var cbs = callbacks[type];\r\n            for (var i = 0, len = cbs.length; i < len; i = i + 1) {\r\n              var cb = cbs[i];\r\n              if (isFunction(cb)) {\r\n                cb();\r\n              }\r\n            }\r\n            callbacks[type] = [];\r\n          }\r\n        });\r\n      } else if (s === \"loaded\") {\r\n        init();\r\n      } else if (s === \"fail\") {\r\n        throwError('networkError', config);\r\n      } else if (s === \"loading\") {\r\n        callbacks[type].push(init);\r\n      }\r\n    });\r\n  };\r\n  window.initGeetest = initGeetest;\r\n  return initGeetest;\r\n});\r\n\r\nexport default {\r\n  gtInit\r\n}\r\n"]}]}