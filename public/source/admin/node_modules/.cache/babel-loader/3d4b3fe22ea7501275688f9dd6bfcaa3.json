{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/components/Tinymce.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/components/Tinymce.vue","mtime":1575000418000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\nimport tinymce from 'tinymce/tinymce';\nimport Editor from '@tinymce/tinymce-vue';\nimport 'tinymce/themes/silver'; // 编辑器插件plugins\n// 更多插件参考：https://www.tiny.cloud/docs/plugins/\n\nimport 'tinymce/plugins/image'; // 插入上传图片插件\n\nimport 'tinymce/plugins/media'; // 插入视频插件\n\nimport 'tinymce/plugins/table'; // 插入表格插件\n\nimport 'tinymce/plugins/lists'; // 列表插件\n\nimport 'tinymce/plugins/wordcount'; // 字数统计插件\n\nimport 'tinymce/plugins/autoresize'; // 字数统计插件\n\nimport 'tinymce/plugins/fullscreen'; // 字数统计插件\n\nexport default {\n  components: {\n    Editor: Editor\n  },\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    plugins: {\n      type: [String, Array],\n      default: 'lists image media table wordcount autoresize fullscreen'\n    },\n    toolbar: {\n      type: [String, Array],\n      default: 'undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat fullscreen'\n    }\n  },\n  data: function data() {\n    return {\n      uploadUrl: this.api.common.upload + '?module=content',\n      init: {\n        language_url: '/tinymce/langs/zh_CN.js',\n        language: 'zh_CN',\n        skin_url: '/tinymce/skins/ui/oxide',\n        // skin_url: '/tinymce/skins/ui/oxide-dark',//暗色系\n        height: 300,\n        plugins: this.plugins,\n        toolbar: this.toolbar,\n        branding: false,\n        menubar: false,\n        // 此处为图片上传处理函数，这个直接用了base64的图片形式上传图片，\n        // 如需ajax上传可参考https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_handler\n        // images_upload_handler: (blobInfo, success, failure) => {\n        //   const img = 'data:image/jpeg;base64,' + blobInfo.base64()\n        //   success(img)\n        // }\n        images_upload_handler: function images_upload_handler(blobInfo, success, failure) {\n          var xhr, formData;\n          xhr = new XMLHttpRequest();\n          xhr.withCredentials = false;\n          xhr.open('POST', localStorage.getItem('uploadContent'));\n\n          xhr.onload = function () {\n            var json;\n\n            if (xhr.status != 200) {\n              failure('HTTP Error: ' + xhr.status);\n              return;\n            }\n\n            json = JSON.parse(xhr.responseText);\n\n            if (!json || typeof json.data.url != 'string') {\n              failure('Invalid JSON: ' + xhr.responseText);\n              return;\n            }\n\n            success(localStorage.getItem('uploadBase') + json.data.url);\n          };\n\n          formData = new FormData();\n          formData.append('file', blobInfo.blob(), blobInfo.filename());\n          xhr.send(formData);\n        }\n      },\n      myValue: this.value\n    };\n  },\n  created: function created() {\n    this.uploadUrl = this.uploadUrl + '?module=content';\n  },\n  mounted: function mounted() {\n    tinymce.init({});\n  },\n  methods: {\n    // 添加相关的事件，可用的事件参照文档=> https://github.com/tinymce/tinymce-vue => All available events\n    // 需要什么事件可以自己增加\n    onClick: function onClick(e) {\n      this.$emit('onClick', e, tinymce);\n    },\n    // 可以添加一些自己的自定义事件，如清空内容\n    clear: function clear() {\n      this.myValue = '';\n    }\n  },\n  watch: {\n    value: function value(newValue) {\n      this.myValue = newValue;\n    },\n    myValue: function myValue(newValue) {\n      this.$emit('input', newValue);\n    }\n  }\n};",{"version":3,"sources":["Tinymce.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"tinymce-editor\">\r\n        <editor v-model=\"myValue\"\r\n                :init=\"init\"\r\n                :disabled=\"disabled\"\r\n                @onClick=\"onClick\">\r\n        </editor>\r\n    </div>\r\n</template>\r\n<script>\r\n  import tinymce from 'tinymce/tinymce'\r\n  import Editor from '@tinymce/tinymce-vue'\r\n  import 'tinymce/themes/silver'\r\n  // 编辑器插件plugins\r\n  // 更多插件参考：https://www.tiny.cloud/docs/plugins/\r\n  import 'tinymce/plugins/image'// 插入上传图片插件\r\n  import 'tinymce/plugins/media'// 插入视频插件\r\n  import 'tinymce/plugins/table'// 插入表格插件\r\n  import 'tinymce/plugins/lists'// 列表插件\r\n  import 'tinymce/plugins/wordcount'// 字数统计插件\r\n  import 'tinymce/plugins/autoresize'// 字数统计插件\r\n  import 'tinymce/plugins/fullscreen'// 字数统计插件\r\n  export default {\r\n    components: {\r\n      Editor\r\n    },\r\n    props: {\r\n      value: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      disabled: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      plugins: {\r\n        type: [String, Array],\r\n        default: 'lists image media table wordcount autoresize fullscreen'\r\n      },\r\n      toolbar: {\r\n        type: [String, Array],\r\n        default: 'undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat fullscreen'\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        uploadUrl: this.api.common.upload + '?module=content',\r\n        init: {\r\n          language_url: '/tinymce/langs/zh_CN.js',\r\n          language: 'zh_CN',\r\n          skin_url: '/tinymce/skins/ui/oxide',\r\n          // skin_url: '/tinymce/skins/ui/oxide-dark',//暗色系\r\n          height: 300,\r\n          plugins: this.plugins,\r\n          toolbar: this.toolbar,\r\n          branding: false,\r\n          menubar: false,\r\n          // 此处为图片上传处理函数，这个直接用了base64的图片形式上传图片，\r\n          // 如需ajax上传可参考https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_handler\r\n          // images_upload_handler: (blobInfo, success, failure) => {\r\n          //   const img = 'data:image/jpeg;base64,' + blobInfo.base64()\r\n          //   success(img)\r\n          // }\r\n          images_upload_handler: function (blobInfo, success, failure) {\r\n            var xhr, formData;\r\n\r\n            xhr = new XMLHttpRequest();\r\n            xhr.withCredentials = false;\r\n            xhr.open('POST', localStorage.getItem('uploadContent'));\r\n\r\n            xhr.onload = function() {\r\n              var json;\r\n\r\n              if (xhr.status != 200) {\r\n                failure('HTTP Error: ' + xhr.status);\r\n                return;\r\n              }\r\n\r\n              json = JSON.parse(xhr.responseText);\r\n\r\n              if (!json || typeof json.data.url != 'string') {\r\n                failure('Invalid JSON: ' + xhr.responseText);\r\n                return;\r\n              }\r\n\r\n              success(localStorage.getItem('uploadBase') + json.data.url);\r\n            };\r\n\r\n            formData = new FormData();\r\n            formData.append('file', blobInfo.blob(), blobInfo.filename());\r\n\r\n            xhr.send(formData);\r\n          }\r\n        },\r\n        myValue: this.value\r\n      }\r\n    },\r\n    created(){\r\n      this.uploadUrl = this.uploadUrl + '?module=content'\r\n    },\r\n    mounted () {\r\n      tinymce.init({})\r\n    },\r\n    methods: {\r\n      // 添加相关的事件，可用的事件参照文档=> https://github.com/tinymce/tinymce-vue => All available events\r\n      // 需要什么事件可以自己增加\r\n      onClick (e) {\r\n        this.$emit('onClick', e, tinymce)\r\n      },\r\n      // 可以添加一些自己的自定义事件，如清空内容\r\n      clear () {\r\n        this.myValue = ''\r\n      }\r\n    },\r\n    watch: {\r\n      value (newValue) {\r\n        this.myValue = newValue\r\n      },\r\n      myValue (newValue) {\r\n        this.$emit('input', newValue)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n    .tox-tinymce{\r\n        min-height: 200px!important;\r\n    }\r\n    </style>\r\n"],"sourceRoot":"src/components"}]}