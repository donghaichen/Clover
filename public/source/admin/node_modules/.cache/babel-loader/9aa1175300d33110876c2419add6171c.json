{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/views/content/ProductView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/views/content/ProductView.vue","mtime":1575000446000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TinymceEditor from \"../../components/Tinymce\";\nexport default {\n  components: {\n    TinymceEditor: TinymceEditor\n  },\n  data: function data() {\n    return {\n      albumCount: 5,\n      albumUpload: true,\n      file_size: JSON.parse(localStorage.getItem('config')).file_size,\n      uploadUrl: this.api.common.upload,\n      uploadDocUrl: this.api.common.upload,\n      contentType: 'product',\n      cascader: [],\n      data: [],\n      attribute: [],\n      album: [],\n      doc: [],\n      formItem: {\n        id: 0,\n        title: '',\n        is_offer: false,\n        is_recommend: false,\n        price: '0.00',\n        image: '',\n        content: '',\n        category_id: [0],\n        doc: [],\n        extend_mates: '',\n        extend_environmental: '',\n        extend_general: '',\n        extend_physical: '',\n        extend_electric: '',\n        extend_certification: '',\n        extend_welding: '',\n        extend_material: '',\n        extend_drawing: '' // searchCriteria: [\n        // ],\n\n      },\n      searchCriteria: [],\n      ruleValidate: {\n        title: [{\n          required: true,\n          message: '标题不能为空',\n          trigger: 'blur'\n        }, {\n          type: 'string',\n          min: 2,\n          message: '标题必须大于 2 个字',\n          trigger: 'blur'\n        }, {\n          type: 'string',\n          max: 200,\n          message: '标题必须小于200 个字',\n          trigger: 'blur'\n        }],\n        // category: [\n        //   { required: true, message: '类别不能为空', type: 'number', trigger: 'change' },\n        // ],\n        // row: [\n        //   { required: true, message: '行数不能为空', type: 'number', trigger: 'change'},\n        // ],\n        // pitch: [\n        //   { required: true, message: '间距不能为空', type: 'number', trigger: 'change'},\n        // ],\n        // electric_current: [\n        //   { required: true, message: '额定电流不能为空', type: 'number', trigger: 'change'},\n        // ],\n        // installation_method: [\n        //   { required: true, message: '安装类型不能为空', type: 'number', trigger: 'change'},\n        // ],\n        content: [{\n          required: true,\n          message: '简介不能为空',\n          trigger: 'blur'\n        }],\n        image: [{\n          required: true,\n          message: '缩略图不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.uploadUrl = this.uploadUrl + '?module=' + this.contentType;\n    this.uploadDocUrl = this.api.common.upload + '?module=doc';\n    this.attribute = JSON.parse(localStorage.getItem('config'))['product_attribute']; // 所属栏目\n\n    var url = this.api.category.cascaderContent + this.contentType;\n    this.$axios.get(url).then(function (response) {\n      if (response.data.code == 0) {\n        _this.cascader = response.data.data;\n      } else {\n        _this.$Message.error('数据获取失败，请检查');\n      }\n    });\n    this.$axios.get(this.api.content.searchCriteria).then(function (response) {\n      _this.loading = false;\n      console.log(response.data.data);\n      _this.searchCriteria = response.data.data;\n    }); //表单内容\n\n    if (this.$route.query.id > 0) {\n      this.$axios.get(this.api.content.view + this.contentType + '/' + this.$route.query.id).then(function (response) {\n        if (response.data.code == 0) {\n          _this.formItem = response.data.data;\n          _this.formItem.doc = [];\n          _this.doc = response.data.data.file;\n\n          if (response.data.data.attribute != null && JSON.parse(response.data.data.attribute).length > 0) {\n            var attribute = JSON.parse(response.data.data.attribute);\n\n            for (var i = 0; i < attribute.length; i++) {\n              _this.attribute[i] = attribute[i];\n            }\n          }\n\n          if (response.data.data.album != null) {\n            var album = JSON.parse(response.data.data.album);\n            _this.album = album;\n            _this.albumUpload = album.length >= _this.albumCount ? false : true;\n          }\n        } else {\n          _this.$Message.error('数据获取失败，请检查');\n        }\n      });\n    }\n  },\n  methods: {\n    resetAlbum: function resetAlbum() {\n      this.albumUpload = true;\n      this.album = [];\n    },\n    imgUrl: function imgUrl(src) {\n      console.log(src.length);\n\n      if (src.length <= 0) {\n        this.$Message.error('尚未上传图片，无法查看');\n        return false;\n      }\n\n      if (src.substr(0, 4).toLowerCase() != \"http\") {\n        src = this.api.static.baseUrl + src;\n      }\n\n      return src;\n    },\n    viewPic: function viewPic(src) {\n      if (src.length <= 0) {\n        this.$Message.error('尚未上传图片，无法查看');\n        return false;\n      }\n\n      src = this.imgUrl(src);\n      var title = '查看图片';\n      var content = '<img style=\"width: 88%\" src=\"' + src + '\">';\n      this.$Modal.info({\n        title: title,\n        content: content\n      });\n    },\n    handleSuccessAlbum: function handleSuccessAlbum(response) {\n      this.album.push({\n        src: this.imgUrl(response.data.url)\n      });\n\n      if (this.album.length > this.albumCount - 1) {\n        this.albumUpload = false;\n      }\n\n      this.$Message.success('上传成功');\n    },\n    handleSuccessDoc: function handleSuccessDoc(response) {\n      this.formItem.doc.push({\n        name: response.data.name,\n        src: this.imgUrl(response.data.url)\n      });\n      this.$Message.success('上传成功');\n    },\n    handleSuccess: function handleSuccess(response) {\n      this.formItem.image = response.data.url;\n      this.$Message.success('上传成功');\n    },\n    handleVideoSuccess: function handleVideoSuccess(response) {\n      this.formItem.video = response.data.url;\n      this.$Message.success('上传成功');\n    },\n    handleError: function handleError(event) {\n      console.log(event);\n      this.$Message.error('上传错误，请重新上传');\n    },\n    handleFormatError: function handleFormatError(file) {\n      this.$Notice.warning({\n        title: '文件格式错误',\n        desc: '文件： ' + file.name + ' 格式错误, 请上传允许的文件.'\n      });\n    },\n    handleMaxSize: function handleMaxSize(file) {\n      this.$Notice.warning({\n        title: '文件大小超过限制',\n        desc: '文件：  ' + file.name + ' 不超过' + this.file_size + 'M'\n      });\n    },\n    // 清空内容\n    clear: function clear() {\n      this.$refs.editor.clear();\n    },\n    format: function format(labels, selectedData) {\n      var index = labels.length - 1;\n      var data = selectedData[index] || false;\n\n      if (data && data.code) {\n        return labels[index] + ' - ' + data.code;\n      }\n\n      return labels[index];\n    },\n    query: function query(data) {\n      var _this2 = this;\n\n      var url = this.api.user.view;\n      this.$axios.post(url, data).then(function (response) {\n        if (response.data.code == 0) {\n          _this2.$Message.success('操作成功');\n        } else {\n          _this2.$Message.error(response.data.msg);\n        }\n      });\n    },\n    gotoPage: function gotoPage(name) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.$router.push({\n        //核心语句\n        name: name,\n        //跳转的路径\n        query: params //跳转的参数\n\n      });\n    },\n    // searchCriteria: function()\n    // {\n    //   this.$axios.get(this.api.content.searchCriteria, {params:params})\n    //     .then((response) => {\n    //       this.loading = false;\n    //       console.log(response.data.searchCriteria)\n    //       this.searchCriteria = response.data.searchCriteria\n    //     })\n    // },\n    handleSubmit: function handleSubmit(name) {\n      var _this3 = this;\n\n      this.$refs[name].validate(function (valid) {\n        if (valid) {\n          var data = _this3.formItem;\n          var attribute = JSON.stringify(_this3.attribute);\n          var album = JSON.stringify(_this3.album);\n          data.attribute = attribute;\n          data.album = album;\n          data.doc = JSON.stringify(data.doc);\n          var url = _this3.api.content.save + _this3.contentType + '/' + _this3.formItem.id;\n\n          _this3.$axios.post(url, data).then(function (response) {\n            if (response.data.code == 0) {\n              _this3.$Message.success('操作成功');\n\n              setTimeout(function () {\n                _this3.gotoPage('product');\n              }, 1000);\n            } else {\n              _this3.$Message.error(response.data.msg);\n            }\n          });\n        } else {\n          _this3.$Message.error('请正确输入表单内容');\n        }\n      });\n    },\n    handleReset: function handleReset(name) {\n      this.$refs[name].resetFields();\n    }\n  }\n};",{"version":3,"sources":["ProductView.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"content\">\r\n        <Card :bordered=\"false\">\r\n            <Tabs value=\"name1\">\r\n                <TabPane label=\"基本信息\" name=\"name1\">\r\n                    <p slot=\"title\"></p>\r\n                    <Form ref=\"formItem\" :model=\"formItem\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n                        <FormItem label=\"所属栏目\" prop=\"category_id\">\r\n                            <Cascader :data=\"cascader\" v-model=\"formItem.category_id\" :filterable=\"true\" change-on-select></Cascader>\r\n                            <p>所属栏目必选，发布到顶级栏目可以选择无上级</p>\r\n                        </FormItem>\r\n                        <FormItem label=\"标题\" prop=\"title\">\r\n                            <Input v-model=\"formItem.title\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n<!--                        <FormItem label=\"产品类别\" prop=\"category\">-->\r\n<!--                            <Select v-model=\"formItem.category\" style=\"width:100%\">-->\r\n<!--                                <Option v-for=\"(value, key, index) in searchCriteria.category\" :value=\"key\" :key=\"key\">{{ value }}</Option>-->\r\n<!--                            </Select>-->\r\n<!--                        </FormItem>-->\r\n<!--                        <FormItem label=\"产品行数\" prop=\"row\">-->\r\n<!--                            <Select v-model=\"formItem.row\" style=\"width:100%\">-->\r\n<!--                                <Option v-for=\"(value, key, index) in searchCriteria.row\" :value=\"key\" :key=\"key\">{{ value }}</Option>-->\r\n<!--                            </Select>-->\r\n<!--                        </FormItem>-->\r\n<!--                        <FormItem label=\"产品间距（MM)\" prop=\"pitch\">-->\r\n<!--                            <Select v-model=\"formItem.pitch\" style=\"width:100%\">-->\r\n<!--                                <Option v-for=\"(value, key, index) in searchCriteria.pitch\" :value=\"key\" :key=\"key\">{{ value }}</Option>-->\r\n<!--                            </Select>-->\r\n<!--                        </FormItem>-->\r\n<!--                        <FormItem label=\"额定电流（最大值）\" prop=\"electric_current\">-->\r\n<!--                            <Select v-model=\"formItem.electric_current\" style=\"width:100%\">-->\r\n<!--                                <Option v-for=\"(value, key, index) in searchCriteria.electric_current\" :value=\"key\" :key=\"key\">{{ value }}</Option>-->\r\n<!--                            </Select>-->\r\n<!--                        </FormItem>-->\r\n<!--                        <FormItem label=\"安装类型\" prop=\"installation_method\">-->\r\n<!--                            <Select v-model=\"formItem.installation_method\" style=\"width:100%\">-->\r\n<!--                                <Option v-for=\"(value, key, index) in searchCriteria.installation_method\" :value=\"key\" :key=\"key\">{{ value }}</Option>-->\r\n<!--                            </Select>-->\r\n<!--                        </FormItem>-->\r\n                        <FormItem label=\"文档\" prop=\"doc\">\r\n                            <p>请在本地修改好文件名再上传，不支持在线修改文件名</p>\r\n                            <p>允许的文件格式为['jpg','jpeg','png', 'gif', 'rar','zip','tar.gz','exe','txt','doc','docx','xls','xlsx','ppt','pdf'] 且文件大小不超过 {{file_size}} M</p>\r\n                            <Upload\r\n                                    multiple\r\n                                    type=\"drag\"\r\n                                    :on-success=\"handleSuccessDoc\"\r\n                                    :on-error=\"handleError\"\r\n                                    :max-size=\"file_size * 1024\"\r\n                                    :on-format-error=\"handleFormatError\"\r\n                                    :on-exceeded-size=\"handleMaxSize\"\r\n                                    :format=\"['jpg','jpeg','png', 'gif', 'rar','zip','tar.gz','exe','txt','doc','docx','xls','xlsx','ppt','pdf']\"\r\n                                    :action=\"uploadDocUrl\">\r\n                                <div style=\"padding: 20px 0\">\r\n                                    <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n                                    <p>单击或拖动文件以上传</p>\r\n                                </div>\r\n                            </Upload>\r\n                            <List\r\n                                    v-if=\"this.$route.query.id > 0 && doc.length > 0\"\r\n                                    header=\"已上传成功的文档，如重新上传文档，会覆盖之该产品前上传的所有文档，请谨慎操作，如需修改文档，请上传该产品所有文档\"\r\n                                    size=\"small\"\r\n                            >\r\n                                <ul class=\"ivu-upload-list\">\r\n                                    <li v-for=\"(item, index) in doc\" class=\"ivu-upload-list-file ivu-upload-list-file-finish\" :key=\"index\">\r\n                                        <span><i class=\"ivu-icon ivu-icon-ios-image\"></i> {{item.name}} </span>\r\n                                        <Progress :percent=\"100\" :stroke-width=\"2\" />\r\n                                    </li>\r\n                                </ul>\r\n                            </List>\r\n\r\n\r\n                        </FormItem>\r\n                        <FormItem label=\"Mates With/Use With\" prop=\"mates\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_mates\"\r\n\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"产物环境符合\" prop=\"environmental\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_environmental\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <h3 id=\"ZXS\">Part Details</h3>\r\n\r\n                        <FormItem label=\"一般\" prop=\"general\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_general\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"物理\" prop=\"physical\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_physical\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"电气\" prop=\"electric\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_electric\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"机构认证\" prop=\"certification\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_certification\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"焊接处理数据\" prop=\"welding\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_welding\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"材料信息\" prop=\"material\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_material\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"参考：图纸编号\" prop=\"drawing\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.extend_drawing\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n                        <FormItem label=\"价格\" prop=\"price\">\r\n                            <Input v-model=\"formItem.price\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n                        <FormItem label=\"缩略图\" prop=\"image\">\r\n                            <Input v-model=\"formItem.image\" disabled placeholder=\"请上传缩略图\"></Input>\r\n                            <p class=\"desc\">支持上传的文件格式为 jpg·jpeg·png·gif 且文件大小不超过 {{file_size}} M</p>\r\n                            <Upload\r\n                                    ref=\"upload\"\r\n                                    :show-upload-list=\"false\"\r\n                                    :on-success=\"handleSuccess\"\r\n                                    :on-error=\"handleError\"\r\n                                    :max-size=\"file_size * 1024\"\r\n                                    :on-format-error=\"handleFormatError\"\r\n                                    :on-exceeded-size=\"handleMaxSize\"\r\n                                    :format=\"['jpg','jpeg','png', 'gif']\"\r\n                                    :action=\"uploadUrl\">\r\n                                <Button icon=\"ios-cloud-upload-outline\">上传</Button>\r\n                            </Upload>\r\n                            <Button style=\"margin-left: 100px;margin-top: -68px;\" @click=\"viewPic(formItem.image)\">查看图片</Button>\r\n                        </FormItem>\r\n                        <FormItem label=\"是否推荐\">\r\n                            <i-switch v-model=\"formItem.is_recommend\" size=\"large\">\r\n                                <span slot=\"true\">开启</span>\r\n                                <span slot=\"false\">关闭</span>\r\n                            </i-switch>\r\n                        </FormItem>\r\n                        <!--                        <FormItem label=\"是否特价\">-->\r\n                        <!--                            <i-switch v-model=\"formItem.is_offer\" size=\"large\">-->\r\n                        <!--                                <span slot=\"true\">开启</span>-->\r\n                        <!--                                <span slot=\"false\">关闭</span>-->\r\n                        <!--                            </i-switch>-->\r\n                        <!--                        </FormItem>-->\r\n                        <FormItem label=\"简介\" prop=\"content\">\r\n                            <tinymce-editor ref=\"editor\"\r\n                                            v-model=\"formItem.content\"\r\n                            >\r\n                            </tinymce-editor>\r\n                        </FormItem>\r\n\r\n                        <FormItem>\r\n                            <FormItem>\r\n                                <Button type=\"primary\" @click=\"handleSubmit('formItem')\">保存</Button>\r\n                                <Button @click=\"handleReset('formItem')\" style=\"margin-left: 8px\">重置</Button>\r\n                            </FormItem>\r\n                        </FormItem>\r\n                    </Form>\r\n                </TabPane>\r\n                                <TabPane label=\"属性\" name=\"name2\">\r\n                                    <div class=\"ivu-form ivu-form-label-right\">\r\n                                        <div style=\"margin: 10px 0 20px\" v-for=\"(item, index) in attribute\" :key=\"index\">\r\n                                            <label class=\"ivu-form-item-label\" style=\"width: 80px;\">{{item.name }}</label>\r\n                                            <div class=\"ivu-form-item-content\" style=\"margin-left: 80px;\">\r\n                                                <div data-v-2a320a54=\"\" class=\"ivu-input-wrapper ivu-input-wrapper-default ivu-input-type\">\r\n                                                    <input v-model=\"item['value']\" class=\"ivu-input ivu-input-default\">\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </TabPane>\r\n<!--                                <TabPane label=\"相册\" name=\"name3\">-->\r\n<!--                &lt;!&ndash;                    <li v-for=\"n in 3\">{{n}}</li><br>&ndash;&gt;-->\r\n<!--                &lt;!&ndash;                    <li v-for=\"(n,index) in 3\">{{n}}&#45;&#45;{{index}}</li>&ndash;&gt;-->\r\n<!--                                    <Row style=\"margin: 20px\">-->\r\n<!--                                        <Col :lg=\"8\" :md=\"24\">-->\r\n<!--                                           <div style=\"width: 300px\">-->\r\n<!--                                               <Carousel loop v-if=\"album.length > 0\">-->\r\n<!--                                                   <CarouselItem v-for=\"(item, index) in album\"  :key=\"index\">-->\r\n<!--                                                       <div class=\"demo-carousel\"><img :src=\"item.src\"></div>-->\r\n<!--                                                   </CarouselItem>-->\r\n<!--                                               </Carousel>-->\r\n<!--                                           </div>-->\r\n<!--                                            <p style=\"margin: 15px 0;\" class=\"desc\">最多可以上传 <Tag color=\"warning\">{{albumCount}}</Tag> 个图片, 您已上传 <Tag color=\"green\">{{album.length}}</Tag>个</p>-->\r\n<!--                                            <p style=\"margin: 15px 0;\" class=\"desc\">支持上传的文件格式为 <Tag>jpg·jpeg·png·gif</Tag> 且文件大小不超过 <Tag>{{file_size}}</Tag> M</p>-->\r\n<!--                                            <p style=\"margin: 15px 0;\" class=\"desc\" v-if=\"album.length > 0\">-->\r\n<!--                                                已上传 <Tag color=\"success\">{{album.length}}</Tag> 张图片，-->\r\n<!--                                                <Button type=\"error\" @click.native=\"resetAlbum\" style=\"margin: 10px 0\" icon=\"md-close\">-->\r\n<!--                                                清空相册继续上传图片-->\r\n<!--                                            </Button>-->\r\n<!--                                            </p>-->\r\n<!--                                            <Upload v-show=\"albumUpload\"-->\r\n<!--                                                    type=\"drag\"-->\r\n<!--                                                    ref=\"upload\"-->\r\n<!--                                                    :show-upload-list=\"false\"-->\r\n<!--                                                    :on-success=\"handleSuccessAlbum\"-->\r\n<!--                                                    :on-error=\"handleError\"-->\r\n<!--                                                    :max-size=\"file_size * 1024\"-->\r\n<!--                                                    :on-format-error=\"handleFormatError\"-->\r\n<!--                                                    :on-exceeded-size=\"handleMaxSize\"-->\r\n<!--                                                    :format=\"['jpg','jpeg','png', 'gif']\"-->\r\n<!--                                                    :action=\"uploadUrl\">-->\r\n<!--                                                <div style=\"padding: 30px 0\">-->\r\n<!--                                                <Icon type=\"ios-cloud-upload\" size=\"200\" style=\"color: #3399ff\"></Icon>-->\r\n<!--                                                <p>点击选择或拖动文件到此处上传</p>-->\r\n<!--                                            </div>-->\r\n<!--                                            </Upload>-->\r\n<!--                                        </Col>-->\r\n<!--                                    </Row>-->\r\n\r\n<!--                                </TabPane>-->\r\n            </Tabs>\r\n        </Card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import TinymceEditor from '../../components/Tinymce'\r\n  export default {\r\n    components: {\r\n      TinymceEditor\r\n    },\r\n    data () {\r\n      return {\r\n        albumCount: 5,\r\n        albumUpload: true,\r\n        file_size: JSON.parse(localStorage.getItem('config')).file_size,\r\n        uploadUrl: this.api.common.upload,\r\n        uploadDocUrl: this.api.common.upload,\r\n        contentType: 'product',\r\n        cascader: [],\r\n        data:[],\r\n        attribute:[],\r\n        album: [],\r\n        doc: [],\r\n        formItem: {\r\n          id: 0,\r\n          title: '',\r\n          is_offer: false,\r\n          is_recommend: false,\r\n          price: '0.00',\r\n          image: '',\r\n          content: '',\r\n          category_id: [0],\r\n          doc:[],\r\n          extend_mates: '',\r\n          extend_environmental: '',\r\n          extend_general: '',\r\n          extend_physical: '',\r\n          extend_electric: '',\r\n          extend_certification: '',\r\n          extend_welding: '',\r\n          extend_material: '',\r\n          extend_drawing: '',\r\n          // searchCriteria: [\r\n          // ],\r\n        },\r\n        searchCriteria: [\r\n        ],\r\n        ruleValidate: {\r\n          title: [\r\n            { required: true, message: '标题不能为空', trigger: 'blur' },\r\n            { type: 'string', min: 2, message: '标题必须大于 2 个字', trigger: 'blur' },\r\n            { type: 'string', max: 200, message: '标题必须小于200 个字', trigger: 'blur' },\r\n          ],\r\n          // category: [\r\n          //   { required: true, message: '类别不能为空', type: 'number', trigger: 'change' },\r\n          // ],\r\n          // row: [\r\n          //   { required: true, message: '行数不能为空', type: 'number', trigger: 'change'},\r\n          // ],\r\n          // pitch: [\r\n          //   { required: true, message: '间距不能为空', type: 'number', trigger: 'change'},\r\n          // ],\r\n          // electric_current: [\r\n          //   { required: true, message: '额定电流不能为空', type: 'number', trigger: 'change'},\r\n          // ],\r\n          // installation_method: [\r\n          //   { required: true, message: '安装类型不能为空', type: 'number', trigger: 'change'},\r\n          // ],\r\n          content : [\r\n            { required: true, message: '简介不能为空', trigger: 'blur' },\r\n          ],\r\n          image : [\r\n            { required: true, message: '缩略图不能为空', trigger: 'blur' },\r\n          ],\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.uploadUrl = this.uploadUrl + '?module=' + this.contentType\r\n      this.uploadDocUrl = this.api.common.upload + '?module=doc'\r\n      this.attribute = JSON.parse(localStorage.getItem('config'))['product_attribute']\r\n\r\n\r\n      // 所属栏目\r\n      var url = this.api.category.cascaderContent + this.contentType;\r\n      this.$axios.get(url)\r\n        .then((response) => {\r\n          if (response.data.code == 0)\r\n          {\r\n            this.cascader = response.data.data\r\n          }else{\r\n            this.$Message.error('数据获取失败，请检查');\r\n          }\r\n        })\r\n\r\n      this.$axios.get(this.api.content.searchCriteria)\r\n        .then((response) => {\r\n          this.loading = false;\r\n          console.log(response.data.data)\r\n          this.searchCriteria = response.data.data\r\n        })\r\n\r\n      //表单内容\r\n      if (this.$route.query.id > 0)\r\n      {\r\n        this.$axios.get(this.api.content.view + this.contentType + '/' + this.$route.query.id)\r\n          .then((response) => {\r\n            if (response.data.code == 0)\r\n            {\r\n              this.formItem = response.data.data\r\n              this.formItem.doc = []\r\n              this.doc = response.data.data.file\r\n              if (response.data.data.attribute != null && JSON.parse(response.data.data.attribute).length > 0)\r\n              {\r\n                let attribute = JSON.parse(response.data.data.attribute)\r\n                for (let i = 0; i < attribute.length; i++) {\r\n                  this.attribute[i] = attribute[i]\r\n                }\r\n              }\r\n              if (response.data.data.album != null)\r\n              {\r\n                let album = JSON.parse(response.data.data.album)\r\n                this.album = album\r\n                this.albumUpload = album.length >= this.albumCount ? false : true\r\n              }\r\n            }else{\r\n              this.$Message.error('数据获取失败，请检查');\r\n            }\r\n          })\r\n      }\r\n    },\r\n    methods: {\r\n      resetAlbum () {\r\n        this.albumUpload = true\r\n        this.album = []\r\n      },\r\n      imgUrl(src)\r\n      {\r\n        console.log(src.length)\r\n        if(src.length <= 0)\r\n        {\r\n          this.$Message.error('尚未上传图片，无法查看')\r\n          return false\r\n        }\r\n        if(src.substr(0,4).toLowerCase() != \"http\")\r\n        {\r\n          src = this.api.static.baseUrl + src;\r\n        }\r\n        return src\r\n      },\r\n      viewPic (src) {\r\n        if(src.length <= 0)\r\n        {\r\n          this.$Message.error('尚未上传图片，无法查看')\r\n          return false\r\n        }\r\n        src = this.imgUrl(src)\r\n        const title = '查看图片';\r\n        const content = '<img style=\"width: 88%\" src=\"' + src +'\">';\r\n        this.$Modal.info({\r\n          title: title,\r\n          content: content\r\n        });\r\n      },\r\n      handleSuccessAlbum (response) {\r\n        this.album.push({\r\n          src: this.imgUrl(response.data.url)\r\n        })\r\n        if(this.album.length > this.albumCount - 1)\r\n        {\r\n          this.albumUpload = false\r\n        }\r\n        this.$Message.success('上传成功')\r\n      },\r\n      handleSuccessDoc (response) {\r\n        this.formItem.doc.push({\r\n          name: response.data.name,\r\n          src: this.imgUrl(response.data.url)\r\n        })\r\n        this.$Message.success('上传成功')\r\n      },\r\n      handleSuccess (response) {\r\n        this.formItem.image = response.data.url\r\n        this.$Message.success('上传成功')\r\n      },\r\n      handleVideoSuccess (response) {\r\n        this.formItem.video = response.data.url\r\n        this.$Message.success('上传成功')\r\n      },\r\n      handleError (event) {\r\n        console.log(event)\r\n        this.$Message.error('上传错误，请重新上传')\r\n\r\n      },\r\n      handleFormatError (file) {\r\n        this.$Notice.warning({\r\n          title: '文件格式错误',\r\n          desc: '文件： ' + file.name + ' 格式错误, 请上传允许的文件.'\r\n        });\r\n      },\r\n      handleMaxSize (file) {\r\n        this.$Notice.warning({\r\n          title: '文件大小超过限制',\r\n          desc: '文件：  ' + file.name + ' 不超过' +  this.file_size + 'M'\r\n        });\r\n      },\r\n      // 清空内容\r\n      clear () {\r\n        this.$refs.editor.clear()\r\n      },\r\n      format (labels, selectedData) {\r\n        const index = labels.length - 1;\r\n        const data = selectedData[index] || false;\r\n        if (data && data.code) {\r\n          return labels[index] + ' - ' + data.code;\r\n        }\r\n        return labels[index];\r\n      },\r\n      query(data) {\r\n        var url = this.api.user.view;\r\n        this.$axios.post(url, data)\r\n          .then((response) => {\r\n            if (response.data.code == 0)\r\n            {\r\n              this.$Message.success('操作成功');\r\n            }else{\r\n              this.$Message.error(response.data.msg);\r\n            }\r\n          })\r\n      },\r\n      gotoPage: function(name, params = {}){\r\n        this.$router.push({  //核心语句\r\n          name:name,   //跳转的路径\r\n          query:params,   //跳转的参数\r\n        })\r\n      },\r\n      // searchCriteria: function()\r\n      // {\r\n      //   this.$axios.get(this.api.content.searchCriteria, {params:params})\r\n      //     .then((response) => {\r\n      //       this.loading = false;\r\n      //       console.log(response.data.searchCriteria)\r\n      //       this.searchCriteria = response.data.searchCriteria\r\n      //     })\r\n      // },\r\n      handleSubmit (name) {\r\n        this.$refs[name].validate((valid) => {\r\n          if (valid) {\r\n            let data = this.formItem\r\n            let attribute = JSON.stringify(this.attribute)\r\n            let album = JSON.stringify(this.album)\r\n            data.attribute = attribute\r\n            data.album = album\r\n            data.doc = JSON.stringify(data.doc)\r\n            var url = this.api.content.save + this.contentType + '/' + this.formItem.id;\r\n            this.$axios.post(url, data)\r\n              .then((response) => {\r\n                if (response.data.code == 0)\r\n                {\r\n                  this.$Message.success('操作成功');\r\n                  setTimeout(() => {\r\n                    this.gotoPage('product')\r\n                  }, 1000)\r\n                }else{\r\n                  this.$Message.error(response.data.msg);\r\n                }\r\n              })\r\n          } else {\r\n            this.$Message.error('请正确输入表单内容');\r\n          }\r\n        })\r\n      },\r\n      handleReset (name) {\r\n        this.$refs[name].resetFields();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n    .demo-carousel\r\n    {\r\n        height: 300px;\r\n        width: 300px;\r\n        line-height: 200px;\r\n        text-align: center;\r\n        color: #fff;\r\n        font-size: 20px;\r\n        background: #506b9e;\r\n    }\r\n    .demo-carousel img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n</style>"],"sourceRoot":"src/views/content"}]}