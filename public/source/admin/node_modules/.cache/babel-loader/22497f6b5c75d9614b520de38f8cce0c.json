{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/views/mobile/Mobile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/views/mobile/Mobile.vue","mtime":1574999407000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      file_size: JSON.parse(localStorage.getItem('config')).file_size,\n      uploadUrl: this.api.common.upload,\n      formItem: {\n        h5_seo_title: '',\n        h5_keywords: '',\n        h5_description: '',\n        h5_logo: '',\n        h5_products_list_num: 10,\n        h5_news_list_num: 10\n      },\n      ruleValidate: {},\n      uploadList: [{\n        url: ''\n      }]\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.uploadUrl = this.uploadUrl + '?module=setting';\n    var url = this.api.common.setting;\n    this.$axios.get(url).then(function (response) {\n      if (response.data.code == 0) {\n        _this.formItem = response.data.data;\n      } else {\n        _this.$Message.error('数据获取失败，请检查');\n      }\n    });\n  },\n  mounted: function mounted() {},\n  methods: {\n    viewPic: function viewPic(src) {\n      if (src.length <= 0) {\n        this.$Message.error('尚未上传图片，无法查看');\n        return false;\n      }\n\n      var title = '查看图片';\n      var content = '<img style=\"width: 88%\" src=\"' + this.api.static.baseUrl + src + '\">';\n      this.$Modal.info({\n        title: title,\n        content: content\n      });\n    },\n    handleSuccess: function handleSuccess(response) {\n      this.formItem.h5_logo = response.data.url;\n      this.$Message.success('上传成功');\n    },\n    handleError: function handleError(event) {\n      window.console.log(event);\n      this.$Message.error('上传错误，请重新上传');\n    },\n    handleFormatError: function handleFormatError(file) {\n      this.$Notice.warning({\n        title: '文件格式错误',\n        desc: '文件： ' + file.name + ' 格式错误, 请上传允许的文件.'\n      });\n    },\n    handleMaxSize: function handleMaxSize(file) {\n      this.$Notice.warning({\n        title: '文件大小超过限制',\n        desc: '文件：  ' + file.name + ' 不超过' + this.file_size + 'M'\n      });\n    },\n    handleSubmit: function handleSubmit(name) {\n      var _this2 = this;\n\n      var url = this.api.common.setting;\n      this.$axios.post(url, this.formItem).then(function (response) {\n        if (response.data.code == 0) {\n          _this2.$Message.success('操作成功'); // 更新本地配置\n\n\n          var config = JSON.stringify(_this2.formItem);\n          localStorage.setItem('config', config);\n        } else {\n          _this2.$Message.error(response.data.msg);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Mobile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,SADA;AAEA,MAAA,SAAA,EAAA,KAAA,GAAA,CAAA,MAAA,CAAA,MAFA;AAGA,MAAA,QAAA,EAAA;AACA,QAAA,YAAA,EAAA,EADA;AAEA,QAAA,WAAA,EAAA,EAFA;AAGA,QAAA,cAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA,EAJA;AAKA,QAAA,oBAAA,EAAA,EALA;AAMA,QAAA,gBAAA,EAAA;AANA,OAHA;AAWA,MAAA,YAAA,EAAA,EAXA;AAcA,MAAA,UAAA,EAAA,CACA;AACA,QAAA,GAAA,EAAA;AADA,OADA;AAdA,KAAA;AAoBA,GAtBA;AAuBA,EAAA,OAvBA,qBAuBA;AAAA;;AACA,SAAA,SAAA,GAAA,KAAA,SAAA,GAAA,iBAAA;AACA,QAAA,GAAA,GAAA,KAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AACA,SAAA,MAAA,CAAA,GAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EACA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAHA,MAGA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,YAAA;AACA;AACA,KARA;AASA,GAnCA;AAoCA,EAAA,OApCA,qBAoCA,CACA,CArCA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,GADA,EACA;AACA,UAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EACA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA,eAAA,KAAA;AACA;;AACA,UAAA,KAAA,GAAA,MAAA;AACA,UAAA,OAAA,GAAA,kCAAA,KAAA,GAAA,CAAA,MAAA,CAAA,OAAA,GAAA,GAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,OAAA,EAAA;AAFA,OAAA;AAIA,KAbA;AAcA,IAAA,aAdA,yBAcA,QAdA,EAcA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,GAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AACA,KAjBA;AAkBA,IAAA,WAlBA,uBAkBA,KAlBA,EAkBA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,YAAA;AAEA,KAtBA;AAuBA,IAAA,iBAvBA,6BAuBA,IAvBA,EAuBA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,IAAA,EAAA,SAAA,IAAA,CAAA,IAAA,GAAA;AAFA,OAAA;AAIA,KA5BA;AA6BA,IAAA,aA7BA,yBA6BA,IA7BA,EA6BA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA,UADA;AAEA,QAAA,IAAA,EAAA,UAAA,IAAA,CAAA,IAAA,GAAA,MAAA,GAAA,KAAA,SAAA,GAAA;AAFA,OAAA;AAIA,KAlCA;AAmCA,IAAA,YAnCA,wBAmCA,IAnCA,EAmCA;AAAA;;AACA,UAAA,GAAA,GAAA,KAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,GAAA,EAAA,KAAA,QAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EACA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,EADA,CAEA;;;AACA,cAAA,MAAA,GAAA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,MAAA;AACA,SANA,MAMA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,OAXA;AAYA;AAjDA;AAtCA,CAAA","sourcesContent":["<template>\r\n    <div class=\"content\">\r\n        <Card :bordered=\"false\">\r\n            <Tabs value=\"name1\">\r\n                <TabPane label=\"基本设置\" name=\"name1\">\r\n                    <Form ref=\"formItem\" :model=\"formItem\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n                        <FormItem label=\"站点标题\">\r\n                            <Input v-model=\"formItem.h5_seo_title\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n                        <FormItem label=\"站点关键词\">\r\n                            <Input v-model=\"formItem.h5_keywords\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n                        <FormItem label=\"站点描述\">\r\n                            <Input v-model=\"formItem.h5_description\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n                        <FormItem label=\"站点 LOGO\">\r\n                            <Input v-model=\"formItem.h5_logo\" disabled placeholder=\"\" :value=\"uploadList[0].url\"></Input>\r\n                            <p class=\"desc\">支持上传的文件格式为 jpg·jpeg·png·gif 且文件大小不超过 {{file_size}} M</p>\r\n                            <Upload\r\n                                    ref=\"upload\"\r\n                                    :show-upload-list=\"false\"\r\n                                    :on-success=\"handleSuccess\"\r\n                                    :on-error=\"handleError\"\r\n                                    :max-size=\"file_size * 1024\"\r\n                                    :on-format-error=\"handleFormatError\"\r\n                                    :on-exceeded-size=\"handleMaxSize\"\r\n                                    :format=\"['jpg','jpeg','png', 'gif']\"\r\n                                    :action=\"uploadUrl\">\r\n                                <Button icon=\"ios-cloud-upload-outline\">上传</Button>\r\n                            </Upload>\r\n                            <Button style=\"margin-left: 100px;margin-top: -68px;\" @click=\"viewPic(formItem.h5_logo)\">查看图片</Button>\r\n                        </FormItem>\r\n                        <FormItem label=\"产品列表数量\">\r\n                            <Input v-model=\"formItem.h5_products_list_num\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n                        <FormItem label=\"新闻列表数量\">\r\n                            <Input v-model=\"formItem.h5_news_list_num\" placeholder=\"\"></Input>\r\n                        </FormItem>\r\n                        <FormItem>\r\n                            <Button type=\"primary\" @click=\"handleSubmit('formItem')\">保存</Button>\r\n                        </FormItem>\r\n                    </Form>\r\n                </TabPane>\r\n\r\n            </Tabs>\r\n        </Card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data () {\r\n      return {\r\n        file_size: JSON.parse(localStorage.getItem('config')).file_size,\r\n        uploadUrl: this.api.common.upload,\r\n        formItem: {\r\n          h5_seo_title: '',\r\n          h5_keywords: '',\r\n          h5_description: '',\r\n          h5_logo: '',\r\n          h5_products_list_num: 10,\r\n          h5_news_list_num: 10,\r\n        },\r\n        ruleValidate: {\r\n\r\n        },\r\n        uploadList: [\r\n          {\r\n            url: ''\r\n          }\r\n        ],\r\n      }\r\n    },\r\n    created() {\r\n      this.uploadUrl = this.uploadUrl + '?module=setting'\r\n      var url = this.api.common.setting;\r\n      this.$axios.get(url)\r\n        .then((response) => {\r\n          if (response.data.code == 0)\r\n          {\r\n            this.formItem = response.data.data\r\n          }else{\r\n            this.$Message.error('数据获取失败，请检查');\r\n          }\r\n        })\r\n    },\r\n    mounted () {\r\n    },\r\n    methods: {\r\n      viewPic (src) {\r\n        if(src.length <= 0)\r\n        {\r\n          this.$Message.error('尚未上传图片，无法查看')\r\n          return false\r\n        }\r\n        const title = '查看图片';\r\n        const content = '<img style=\"width: 88%\" src=\"' +this.api.static.baseUrl + src +'\">';\r\n        this.$Modal.info({\r\n          title: title,\r\n          content: content\r\n        });\r\n      },\r\n      handleSuccess (response) {\r\n        this.formItem.h5_logo = response.data.url\r\n        this.$Message.success('上传成功')\r\n      },\r\n      handleError (event) {\r\n        window.console.log(event)\r\n        this.$Message.error('上传错误，请重新上传')\r\n\r\n      },\r\n      handleFormatError (file) {\r\n        this.$Notice.warning({\r\n          title: '文件格式错误',\r\n          desc: '文件： ' + file.name + ' 格式错误, 请上传允许的文件.'\r\n        });\r\n      },\r\n      handleMaxSize (file) {\r\n        this.$Notice.warning({\r\n          title: '文件大小超过限制',\r\n          desc: '文件：  ' + file.name + ' 不超过' +  this.file_size + 'M'\r\n        });\r\n      },\r\n      handleSubmit (name) {\r\n        var url = this.api.common.setting;\r\n        this.$axios.post(url, this.formItem)\r\n          .then((response) => {\r\n            if (response.data.code == 0)\r\n            {\r\n              this.$Message.success('操作成功');\r\n              // 更新本地配置\r\n              let config = JSON.stringify(this.formItem)\r\n              localStorage.setItem('config', config)\r\n            }else{\r\n              this.$Message.error(response.data.msg);\r\n            }\r\n          })\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n    .ivu-form\r\n    {\r\n        padding: 20px;\r\n    }\r\n    .ivu-form .ivu-form-item-label\r\n    {\r\n        text-align: left;\r\n        width: 120px!important;\r\n    }\r\n    .ivu-form .ivu-form-item-content{\r\n        margin-left: 130px!important;\r\n    }\r\n</style>"],"sourceRoot":"src/views/mobile"}]}