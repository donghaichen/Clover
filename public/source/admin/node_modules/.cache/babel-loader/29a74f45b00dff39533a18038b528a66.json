{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/views/content/Download.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/views/content/Download.vue","mtime":1574999404000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      search: {},\n      contentType: 'download',\n      cascader: [],\n      loading: true,\n      total: 0,\n      current: 0,\n      pageSize: 0,\n      selectCount: 0,\n      selectList: [],\n      exportData: [],\n      drop: false,\n      dropDownContent: \"展开\",\n      dropDownIcon: \"ios-arrow-down\",\n      formItem: {\n        category_id: [0],\n        title: '',\n        date: '',\n        is_recommend: '',\n        status: ''\n      },\n      tableData: [],\n      showBorder: true,\n      showStripe: true,\n      showHeader: true,\n      showIndex: false,\n      showCheckbox: true,\n      fixedHeader: false,\n      tableSize: 'default'\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    var url = this.api.category.cascaderContent + this.contentType;\n    this.$axios.get(url).then(function (response) {\n      if (response.data.code == 0) {\n        _this.cascader = response.data.data;\n      } else {\n        _this.$Message.error('数据获取失败，请检查');\n      }\n    });\n    this.getData();\n  },\n  methods: {\n    add: function add() {\n      this.gotoPage(this.contentType + 'View', {\n        id: 0\n      });\n    },\n    handleSearch: function handleSearch() {\n      var params = {\n        category_id: this.formItem.category_id,\n        title: this.formItem.title,\n        date: this.formItem.date,\n        is_recommend: this.formItem.is_recommend,\n        status: this.formItem.status\n      };\n      this.search = params;\n      this.getData(0, params);\n      window.console.log('search');\n    },\n    handleReset: function handleReset(name) {\n      this.$refs[name].resetFields();\n      this.getData();\n    },\n    gotoPage: function gotoPage(name) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.$router.push({\n        //核心语句\n        name: name,\n        //跳转的路径\n        query: params //跳转的参数\n\n      });\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.loading = true;\n      page = page > 0 ? page : 0;\n      this.$axios.get(this.api.content.list + this.contentType + '?page=' + page, {\n        params: params\n      }).then(function (response) {\n        _this2.loading = false;\n        _this2.tableData = response.data.data.data;\n        _this2.current = response.data.data.current_page;\n        _this2.total = response.data.data.total;\n        _this2.pageSize = response.data.data.per_page;\n        return _this2.tableData;\n      });\n    },\n    dropDown: function dropDown() {\n      if (this.drop) {\n        this.dropDownContent = \"展开\";\n        this.dropDownIcon = \"ios-arrow-down\";\n      } else {\n        this.dropDownContent = \"收起\";\n        this.dropDownIcon = \"ios-arrow-up\";\n      }\n\n      this.drop = !this.drop;\n    },\n    show: function show(index) {\n      window.console.log(index);\n    },\n    remove: function remove(params) {\n      this.delete(params.row.id);\n    },\n    changePage: function changePage(index) {\n      this.tableData = this.getData(index, this.search);\n    },\n    delete: function _delete(id) {\n      var _this3 = this;\n\n      this.$axios.post(this.api.content.contentDelete, {\n        id: id,\n        type: this.contentType\n      }).then(function (response) {\n        _this3.loading = false;\n\n        if (response.data.code == 0) {\n          _this3.$Modal.remove();\n\n          _this3.$Message.success(\"删除成功\");\n        } else {\n          _this3.$Message.error(response.data.msg);\n        }\n\n        _this3.getData();\n      });\n    },\n    delAll: function delAll() {\n      var _this4 = this;\n\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要删除的数据\");\n        return;\n      }\n\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\n        loading: true,\n        onOk: function onOk() {\n          var ids = \"\";\n\n          _this4.selectList.forEach(function (e) {\n            ids += e.id + \",\";\n          });\n\n          ids = ids.substring(0, ids.length - 1);\n\n          _this4.delete(ids);\n        }\n      });\n    },\n    recommend: function recommend(id) {\n      var _this5 = this;\n\n      var isRecommend = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.$axios.post(this.api.content.contentRecommend, {\n        id: id,\n        type: this.contentType,\n        recommend: isRecommend\n      }).then(function (response) {\n        _this5.loading = false;\n\n        if (response.data.code == 0) {\n          _this5.$Modal.remove();\n\n          var msg = isRecommend === 1 ? \"推荐成功\" : '取消推荐成功';\n\n          _this5.$Message.success(msg);\n        } else {\n          _this5.$Modal.remove();\n\n          _this5.$Message.error(response.data.msg);\n        }\n\n        _this5.getData();\n      });\n    },\n    recommendAll: function recommendAll() {\n      var _this6 = this;\n\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要操作的数据\");\n        return;\n      }\n\n      this.$Modal.confirm({\n        title: \"确认推荐\",\n        content: \"您确认要推荐所选的 \" + this.selectCount + \" 条数据?\",\n        loading: true,\n        onOk: function onOk() {\n          var ids = \"\";\n\n          _this6.selectList.forEach(function (e) {\n            ids += e.id + \",\";\n          });\n\n          ids = ids.substring(0, ids.length - 1);\n\n          _this6.recommend(ids, 1);\n        }\n      });\n    },\n    cancelRecommendAll: function cancelRecommendAll() {\n      var _this7 = this;\n\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要操作的数据\");\n        return;\n      }\n\n      this.$Modal.confirm({\n        title: \"取消推荐\",\n        content: \"您确认要取消推荐所选的 \" + this.selectCount + \" 条数据?\",\n        loading: true,\n        onOk: function onOk() {\n          var ids = \"\";\n\n          _this7.selectList.forEach(function (e) {\n            ids += e.id + \",\";\n          });\n\n          ids = ids.substring(0, ids.length - 1);\n\n          _this7.recommend(ids, 0);\n        }\n      });\n    },\n    showSelect: function showSelect(e) {\n      // window.console.log(e)\n      this.exportData = e;\n      this.selectList = e;\n      this.selectCount = e.length;\n    },\n    handleDropdown: function handleDropdown(name) {\n      switch (name) {\n        case 'refresh':\n          this.getData();\n          break;\n\n        default:\n      }\n    }\n  },\n  computed: {\n    tableColumns: function tableColumns() {\n      var _this8 = this;\n\n      var columns = [];\n\n      if (this.showCheckbox) {\n        columns.push({\n          type: 'selection',\n          width: 60,\n          align: 'center'\n        });\n      }\n\n      columns.push({\n        title: 'ID',\n        width: 80,\n        key: 'id'\n      });\n      columns.push({\n        title: '所属栏目',\n        key: 'category_name',\n        sortable: true,\n        width: 120,\n        tooltip: true\n      });\n      columns.push({\n        title: '标题',\n        key: 'title',\n        width: 300,\n        tooltip: true\n      });\n      columns.push({\n        title: '状态',\n        key: 'status_cn',\n        align: 'center',\n        width: 150,\n        render: function render(h, params) {\n          var row = params.row; // $status_cn = ['draft' => '草稿', 'pending' => '等待复审', 'publish' => '已发布'];\n\n          var color = row.status === 'publish' ? 'primary' : row.status === 'draft' ? 'success' : 'error';\n          var text = row.status_cn;\n          return h('Tag', {\n            props: {\n              type: 'dot',\n              color: color\n            }\n          }, text);\n        }\n      });\n      columns.push({\n        title: '推荐',\n        key: 'is_recommend',\n        align: 'center',\n        width: 70,\n        render: function render(h, params) {\n          var row = params.row;\n          var color = row.is_recommend === 1 ? 'success' : 'default';\n          var text = row.is_recommend === 1 ? '是' : '否';\n          var recommend = row.is_recommend === 1 ? 0 : 1;\n          return h('Button', {\n            props: {\n              type: color,\n              size: 'small'\n            },\n            on: {\n              click: function click() {\n                _this8.recommend(params.row.id, recommend);\n              }\n            }\n          }, text);\n        }\n      }); // columns.push({\n      //   title: '特价',\n      //   key: 'is_offer',\n      //   align: 'center',\n      //   width: 70,\n      //   render: (h, params) => {\n      //     const row = params.row;\n      //     const color = row.is_offer === 1 ? 'success' : 'default';\n      //     const text = row.is_offer === 1 ? '是' : '否';\n      //     return h('Tag', {\n      //       props: {\n      //         color: color\n      //       }\n      //     }, text);\n      //   }\n      // });\n\n      columns.push({\n        title: '点击量',\n        key: 'click_count',\n        align: 'center',\n        sortable: true,\n        width: 100\n      });\n      columns.push({\n        title: '缩略图',\n        key: 'image',\n        render: function render(h, params) {\n          var image = params.row.image;\n\n          if (image.length > 0 && image.substr(0, 4).toLowerCase() != \"http\") {\n            image = _this8.api.static.baseUrl + image;\n          }\n\n          return h('Avatar', {\n            props: {\n              icon: 'ios-image',\n              src: image,\n              shape: 'square' // size: 'small',\n\n            }\n          });\n        }\n      });\n      columns.push({\n        title: '添加时间',\n        key: 'created_at',\n        sortable: true,\n        tooltip: true\n      });\n      columns.push({\n        title: '更新时间',\n        key: 'updated_at',\n        sortable: true,\n        tooltip: true\n      }); // columns.push({\n      //   title: '发布时间',\n      //   key: 'published_at',\n      //   sortable: true,\n      // });\n\n      columns.push({\n        title: '操作',\n        key: 'action',\n        width: 150,\n        align: 'center',\n        render: function render(h, params) {\n          return h('div', [h('Button', {\n            props: {\n              type: 'primary',\n              size: 'small'\n            },\n            style: {\n              marginRight: '5px'\n            },\n            on: {\n              click: function click() {\n                _this8.gotoPage(_this8.contentType + 'View', {\n                  id: params.row.id\n                });\n              }\n            }\n          }, '详情'), h('Button', {\n            props: {\n              type: 'error',\n              size: 'small'\n            },\n            on: {\n              click: function click() {\n                _this8.remove(params);\n              }\n            }\n          }, '删除')]);\n        }\n      });\n      return columns;\n    }\n  }\n};",{"version":3,"sources":["Download.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"content\">\r\n        <Card :bordered=\"false\" style=\"margin-bottom: 20px\">\r\n            <Form ref=\"formItem\" :model=\"formItem\" :label-width=\"80\">\r\n                <Row>\r\n                    <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"8\" :xl=\"8\">\r\n                        <FormItem label=\"栏目\" prop=\"category_id\">\r\n                            <Cascader :data=\"cascader\" v-model=\"formItem.category_id\" :filterable=\"true\" change-on-select></Cascader>\r\n                        </FormItem>\r\n                    </Col>\r\n                    <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"8\" :xl=\"8\">\r\n                        <FormItem label=\"标题\" prop=\"title\">\r\n                            <Input v-model=\"formItem.title\" placeholder=\"输入标题\"></Input>\r\n                        </FormItem>\r\n                    </Col>\r\n                    <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"8\" :xl=\"8\">\r\n                        <FormItem label=\"添加日期\" prop=\"date\">\r\n                            <DatePicker v-model=\"formItem.date\" show-week-numbers type=\"daterange\" split-panels placeholder=\"选择日期\" style=\"width: 100%;padding-right: 20px\"></DatePicker>\r\n                        </FormItem>\r\n                    </Col>\r\n                    <span v-if=\"drop\">\r\n                     <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"8\" :xl=\"8\">\r\n                        <FormItem label=\"推荐\" prop=\"is_recommend\">\r\n                            <Select v-model=\"formItem.is_recommend\">\r\n                                <Option value=\"1\">是</Option>\r\n                                <Option value=\"0\">否</Option>\r\n                            </Select>\r\n                        </FormItem>\r\n                      </Col>\r\n                    <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"8\" :xl=\"8\">\r\n                        <FormItem label=\"状态\" prop=\"status\">\r\n                            <Select v-model=\"formItem.status\" disabled>\r\n                                <Option value=\"publish\">已发布</Option>\r\n                                <Option value=\"draft\">草稿</Option>\r\n                                <Option value=\"pending\">等待复审</Option>\r\n                            </Select>\r\n                        </FormItem>\r\n                    </Col>\r\n                    </span>\r\n\r\n                    <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"24\" :xl=\"24\">\r\n                        <FormItem style=\"float: right;margin-right: 15px;\">\r\n                            <Button @click=\"handleSearch\" type=\"primary\" icon=\"ios-search\">查询</Button>\r\n                            <Button @click=\"handleReset('formItem')\" style=\"margin-left: 8px\">重置</Button>\r\n                            <a class=\"ivu-ml-8 drop-down\" @click=\"dropDown\" style=\"font-size: 14px;\">\r\n                                {{dropDownContent}}\r\n                                <Icon :type=\"dropDownIcon\"></Icon>\r\n                            </a>\r\n                        </FormItem>\r\n                    </Col>\r\n                    <Col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"24\" :xl=\"24\" style=\"margin-left: 42px;\" class=\"operation\">\r\n                        <Button @click=\"add\" type=\"primary\">新建</Button>\r\n                        <Button @click=\"delAll\" icon=\"md-trash\">批量删除</Button>\r\n                        <Button @click=\"recommendAll\" icon=\"md-trash\">批量推荐</Button>\r\n                        <Button @click=\"cancelRecommendAll\" icon=\"md-trash\">批量取消推荐</Button>\r\n                        <Dropdown @on-click=\"handleDropdown\">\r\n                            <Button>\r\n                                更多操作\r\n                                <Icon type=\"md-arrow-dropdown\" />\r\n                            </Button>\r\n                            <DropdownMenu slot=\"list\">\r\n                                <DropdownItem name=\"refresh\">刷新</DropdownItem>\r\n                                <!--                                <DropdownItem name=\"reset\">重置用户密码</DropdownItem>-->\r\n                                <!--                                <DropdownItem disable name=\"exportData\">导出所选数据</DropdownItem>-->\r\n                                <!--                                <DropdownItem name=\"exportAll\">导出全部数据</DropdownItem>-->\r\n                                <!--                                <DropdownItem name=\"importData\">导入数据(付费)</DropdownItem>-->\r\n                            </DropdownMenu>\r\n                        </Dropdown>\r\n                    </Col>\r\n                </Row>\r\n            </Form>\r\n            <Table\r\n                    :loading = \"loading\"\r\n                    :border=\"true\"\r\n                    :highlight-row=\"true\"\r\n                    :stripe=\"showStripe\"\r\n                    :show-header=\"showHeader\"\r\n                    :height=\"fixedHeader ? 250 : ''\"\r\n                    :size=\"tableSize\"\r\n                    :data=\"tableData\"\r\n                    :columns=\"tableColumns\"\r\n                    @on-selection-change=\"showSelect\"\r\n            >\r\n            </Table>\r\n            <div style=\"margin: 10px;overflow: hidden\">\r\n                <div style=\"float: right;\">\r\n                    <Page :total=\"total\" :current=\"current\" :page-size=\"pageSize\" show-total show-elevator @on-change=\"changePage\"></Page>\r\n                </div>\r\n            </div>\r\n        </Card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data () {\r\n      return {\r\n        search:{},\r\n        contentType: 'download',\r\n        cascader: [],\r\n        loading: true,\r\n        total: 0,\r\n        current: 0,\r\n        pageSize: 0,\r\n        selectCount: 0,\r\n        selectList: [],\r\n        exportData: [],\r\n        drop: false,\r\n        dropDownContent: \"展开\",\r\n        dropDownIcon: \"ios-arrow-down\",\r\n        formItem:{\r\n          category_id: [0],\r\n          title: '',\r\n          date: '',\r\n          is_recommend: '',\r\n          status:'',\r\n        },\r\n        tableData: [],\r\n        showBorder: true,\r\n        showStripe: true,\r\n        showHeader: true,\r\n        showIndex: false,\r\n        showCheckbox: true,\r\n        fixedHeader: false,\r\n        tableSize: 'default'\r\n      }\r\n    },\r\n    created: function () {\r\n      var url = this.api.category.cascaderContent+this.contentType;\r\n      this.$axios.get(url)\r\n        .then((response) => {\r\n          if (response.data.code == 0)\r\n          {\r\n            this.cascader = response.data.data\r\n          }else{\r\n            this.$Message.error('数据获取失败，请检查');\r\n          }\r\n        })\r\n      this.getData()\r\n    },\r\n    methods: {\r\n      add() {\r\n        this.gotoPage(this.contentType + 'View',{\r\n          id: 0\r\n        })\r\n      },\r\n      handleSearch() {\r\n        let params = {\r\n          category_id: this.formItem.category_id,\r\n          title: this.formItem.title,\r\n          date: this.formItem.date,\r\n          is_recommend: this.formItem.is_recommend,\r\n          status: this.formItem.status,\r\n        }\r\n        this.search = params\r\n\r\n        this.getData(0, params)\r\n        window.console.log('search')\r\n      },\r\n      handleReset (name) {\r\n        this.$refs[name].resetFields();\r\n        this.getData();\r\n      },\r\n      gotoPage: function(name, params = {}){\r\n        this.$router.push({  //核心语句\r\n          name:name,   //跳转的路径\r\n          query:params,   //跳转的参数\r\n        })\r\n      },\r\n      getData(page = 0, params = {}) {\r\n        this.loading = true;\r\n        page = page > 0 ? page : 0;\r\n\r\n        this.$axios.get(this.api.content.list + this.contentType + '?page=' + page, {params:params})\r\n          .then((response) => {\r\n            this.loading = false;\r\n            this.tableData = response.data.data.data\r\n            this.current = response.data.data.current_page\r\n            this.total = response.data.data.total\r\n            this.pageSize = response.data.data.per_page\r\n            return this.tableData\r\n          })\r\n      },\r\n      dropDown() {\r\n        if (this.drop) {\r\n          this.dropDownContent = \"展开\";\r\n          this.dropDownIcon = \"ios-arrow-down\";\r\n        } else {\r\n          this.dropDownContent = \"收起\";\r\n          this.dropDownIcon = \"ios-arrow-up\";\r\n        }\r\n        this.drop = !this.drop;\r\n      },\r\n      show (index) {\r\n        window.console.log(index)\r\n      },\r\n      remove (params) {\r\n        this.delete(params.row.id)\r\n      },\r\n      changePage (index) {\r\n        this.tableData = this.getData(index, this.search);\r\n      },\r\n      delete(id){\r\n        this.$axios.post(this.api.content.contentDelete, {\r\n          id: id,\r\n          type: this.contentType\r\n        })\r\n          .then((response) => {\r\n            this.loading = false;\r\n            if (response.data.code == 0)\r\n            {\r\n              this.$Modal.remove();\r\n              this.$Message.success(\"删除成功\");\r\n            }else{\r\n              this.$Message.error(response.data.msg);\r\n            }\r\n            this.getData()\r\n          })\r\n      },\r\n      delAll() {\r\n        if (this.selectCount <= 0) {\r\n          this.$Message.warning(\"您还未选择要删除的数据\");\r\n          return;\r\n        }\r\n        this.$Modal.confirm({\r\n          title: \"确认删除\",\r\n          content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\r\n          loading: true,\r\n          onOk: () => {\r\n            let ids = \"\";\r\n            this.selectList.forEach(function(e) {\r\n              ids += e.id + \",\";\r\n            });\r\n            ids = ids.substring(0, ids.length - 1);\r\n            this.delete(ids)\r\n          }\r\n        });\r\n      },\r\n      recommend(id, isRecommend = 0){\r\n        this.$axios.post(this.api.content.contentRecommend, {\r\n          id: id,\r\n          type: this.contentType,\r\n          recommend: isRecommend\r\n        })\r\n          .then((response) => {\r\n            this.loading = false;\r\n            if (response.data.code == 0)\r\n            {\r\n              this.$Modal.remove();\r\n              let msg = isRecommend === 1 ? \"推荐成功\" : '取消推荐成功'\r\n              this.$Message.success(msg);\r\n            }else{\r\n              this.$Modal.remove();\r\n              this.$Message.error(response.data.msg);\r\n            }\r\n            this.getData()\r\n          })\r\n      },\r\n      recommendAll() {\r\n        if (this.selectCount <= 0) {\r\n          this.$Message.warning(\"您还未选择要操作的数据\");\r\n          return;\r\n        }\r\n        this.$Modal.confirm({\r\n          title: \"确认推荐\",\r\n          content: \"您确认要推荐所选的 \" + this.selectCount + \" 条数据?\",\r\n          loading: true,\r\n          onOk: () => {\r\n            let ids = \"\";\r\n            this.selectList.forEach(function(e) {\r\n              ids += e.id + \",\";\r\n            });\r\n            ids = ids.substring(0, ids.length - 1);\r\n            this.recommend(ids, 1)\r\n          }\r\n        });\r\n      },\r\n      cancelRecommendAll() {\r\n        if (this.selectCount <= 0) {\r\n          this.$Message.warning(\"您还未选择要操作的数据\");\r\n          return;\r\n        }\r\n        this.$Modal.confirm({\r\n          title: \"取消推荐\",\r\n          content: \"您确认要取消推荐所选的 \" + this.selectCount + \" 条数据?\",\r\n          loading: true,\r\n          onOk: () => {\r\n            let ids = \"\";\r\n            this.selectList.forEach(function(e) {\r\n              ids += e.id + \",\";\r\n            });\r\n            ids = ids.substring(0, ids.length - 1);\r\n            this.recommend(ids, 0)\r\n          }\r\n        });\r\n      },\r\n      showSelect(e) {\r\n        // window.console.log(e)\r\n        this.exportData = e;\r\n        this.selectList = e;\r\n        this.selectCount = e.length;\r\n      },\r\n      handleDropdown(name) {\r\n        switch (name) {\r\n          case 'refresh':\r\n            this.getData()\r\n            break\r\n          default:\r\n        }\r\n      },\r\n    },\r\n    computed: {\r\n      tableColumns () {\r\n        let columns = [];\r\n        if (this.showCheckbox) {\r\n          columns.push({\r\n            type: 'selection',\r\n            width: 60,\r\n            align: 'center'\r\n          })\r\n        }\r\n        columns.push({\r\n          title: 'ID',\r\n          width: 80,\r\n          key: 'id',\r\n        });\r\n        columns.push({\r\n          title: '所属栏目',\r\n          key: 'category_name',\r\n          sortable: true,\r\n          width: 120,\r\n          tooltip: true\r\n        });\r\n        columns.push({\r\n          title: '标题',\r\n          key: 'title',\r\n          width: 300,\r\n          tooltip: true\r\n        });\r\n        columns.push({\r\n          title: '状态',\r\n          key: 'status_cn',\r\n          align: 'center',\r\n          width: 150,\r\n          render: (h, params) => {\r\n            const row = params.row;\r\n            // $status_cn = ['draft' => '草稿', 'pending' => '等待复审', 'publish' => '已发布'];\r\n            const color = row.status === 'publish' ? 'primary' : row.status === 'draft' ? 'success' : 'error';\r\n            const text = row.status_cn;\r\n            return h('Tag', {\r\n              props: {\r\n                type: 'dot',\r\n                color: color\r\n              }\r\n            }, text);\r\n          }\r\n        });\r\n        columns.push({\r\n          title: '推荐',\r\n          key: 'is_recommend',\r\n          align: 'center',\r\n          width: 70,\r\n          render: (h, params) => {\r\n            const row = params.row;\r\n            const color = row.is_recommend === 1 ? 'success' : 'default';\r\n            const text = row.is_recommend === 1 ? '是' : '否';\r\n            const recommend = row.is_recommend === 1 ? 0 : 1;\r\n            return h('Button', {\r\n              props: {\r\n                type: color,\r\n                size: 'small'\r\n              },\r\n              on: {\r\n                click: () => {\r\n                  this.recommend(params.row.id, recommend)\r\n                }\r\n              }\r\n            }, text);\r\n          }\r\n        });\r\n        // columns.push({\r\n        //   title: '特价',\r\n        //   key: 'is_offer',\r\n        //   align: 'center',\r\n        //   width: 70,\r\n        //   render: (h, params) => {\r\n        //     const row = params.row;\r\n        //     const color = row.is_offer === 1 ? 'success' : 'default';\r\n        //     const text = row.is_offer === 1 ? '是' : '否';\r\n        //     return h('Tag', {\r\n        //       props: {\r\n        //         color: color\r\n        //       }\r\n        //     }, text);\r\n        //   }\r\n        // });\r\n        columns.push({\r\n          title: '点击量',\r\n          key: 'click_count',\r\n          align: 'center',\r\n          sortable: true,\r\n          width: 100,\r\n        });\r\n        columns.push({\r\n          title: '缩略图',\r\n          key: 'image',\r\n          render: (h, params) => {\r\n            let image = params.row.image\r\n            if(image.length > 0 && image.substr(0,4).toLowerCase() != \"http\")\r\n            {\r\n              image = this.api.static.baseUrl + image;\r\n            }\r\n            return h('Avatar', {\r\n              props: {\r\n                icon: 'ios-image',\r\n                src: image,\r\n                shape: 'square',\r\n                // size: 'small',\r\n              }\r\n            });\r\n          }\r\n        });\r\n        columns.push({\r\n          title: '添加时间',\r\n          key: 'created_at',\r\n          sortable: true,\r\n          tooltip: true\r\n        });\r\n        columns.push({\r\n          title: '更新时间',\r\n          key: 'updated_at',\r\n          sortable: true,\r\n          tooltip: true\r\n        });\r\n        // columns.push({\r\n        //   title: '发布时间',\r\n        //   key: 'published_at',\r\n        //   sortable: true,\r\n        // });\r\n        columns.push({\r\n          title: '操作',\r\n          key: 'action',\r\n          width: 150,\r\n          align: 'center',\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'small'\r\n                },\r\n                style: {\r\n                  marginRight: '5px'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.gotoPage(this.contentType + 'View',{\r\n                      id: params.row.id\r\n                    })\r\n                  }\r\n                }\r\n              }, '详情'),\r\n              h('Button', {\r\n                props: {\r\n                  type: 'error',\r\n                  size: 'small'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.remove(params)\r\n                  }\r\n                }\r\n              }, '删除')\r\n            ]);\r\n          }\r\n        });\r\n        return columns;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n    .ivu-ml-8 {\r\n        margin-left: 8px!important;\r\n    }\r\n    .ivu-form {\r\n        margin: 20px 0!important;\r\n    }\r\n    /*.ivu-row{*/\r\n    /*    margin-left: -42px!important;*/\r\n    /*    margin-right: -12px!important;*/\r\n    /*}*/\r\n    .operation button {\r\n        margin-right: 10px;\r\n    }\r\n\r\n</style>"],"sourceRoot":"src/views/content"}]}