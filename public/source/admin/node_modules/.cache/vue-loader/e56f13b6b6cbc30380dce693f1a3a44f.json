{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/views/Login.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/views/Login.vue","mtime":1575282228744},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"../assets/css/shake.css\";\n.login-vue {\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: #fff;\n    background-repeat: no-repeat;\n    background-size:cover;\n}\n.login-vue .container {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.login-vue .loginBox {\n    width: 350px;\n    background-color: white;\n    box-shadow: 0px 0px 43px -2px rgba(135,130,135,1);\n    border-radius: 8px;\n    padding: 25px;\n    opacity: .7;\n}\n.login-vue .userImage {\n    border-radius: 50%;\n    overflow: hidden;\n    width: 120px;\n    height: 120px;\n    margin: 10px auto 30px;\n    opacity: .7;\n}\n.login-vue img {\n    width: 100%;\n}\n.login-vue .input-wrapper {\n    position: relative;\n}\n.login-vue .ivu-input {\n    width: 100%;\n    /*height: 42px;*/\n    padding-top: 15px;\n    padding-bottom: 15px;\n    margin: 10px 0;\n    /*font-size: 14px;*/\n}\n.login-vue .ivu-input-icon {\n    top: 8px;\n}\n.login-vue .ivu-input-prefix, .login-vue .ivu-input-suffix {\n    top: 10px;\n}\n.login-vue .ivu-checkbox-wrapper {\n    color: #9a9a9a;\n}\n.login-vue .auto-login a{\n    float: right;\n}\n.login-vue .submit {\n    width: 100%;\n    margin-top: 35px;\n    color: white;\n    font-weight: lighter;\n}\n#captcha{\n    margin: 10px 0 20px;\n    height: 32px;\n    color: rgb(0, 0, 0);\n    overflow: hidden;\n    border: 1px solid #dcdee2;\n    border-radius: 4px;\n}\n.geetest_holder.geetest_wind {\n    margin-top: -6px;\n}\n.geetest_holder.geetest_wind .geetest_radar_btn, .geetest_holder.geetest_wind .geetest_success_btn\n{\n    border: none!important;\n}\n.geetest_holder.geetest_wind .geetest_radar_tip, .geetest_holder.geetest_wind .geetest_success_radar_tip\n{\n    font-size: 12px!important;\n}\n@media (max-width: 640px)\n{\n\n    .login-vue .loginBox {\n        width: 320px;\n    }\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"login-vue\" :style=\"bg\">\r\n        <div class=\"container\">\r\n            <div class=\"loginBox\" v-bind:class=\"{ 'shake': shake }\">\r\n                <div class=\"userImage\">\r\n                    <!--          <img src=\"@/assets/img/logo-big.png\">-->\r\n                    <img :src=\"logo\">\r\n                </div>\r\n                <form id=\"loginForm\">\r\n                    <div class=\"input-wrapper\" v-bind:class=\"{ 'ivu-form-item-error': accountError }\">\r\n                        <Input prefix=\"ios-contact\" v-model=\"account\" placeholder=\"用户名\" @keyup.enter.native=\"submit\" clearable @on-blur=\"verifyAccount\"/>\r\n                    </div>\r\n                    <div class=\"input-wrapper\" v-bind:class=\"{ 'ivu-form-item-error': passwordError }\">\r\n                        <Input type=\"password\" v-model=\"password\" prefix=\"md-lock\" placeholder=\"密码\" @keyup.enter.native=\"submit\" clearable @on-focus=\"changeLogo\" @on-blur=\"verifyPassword\"/>\r\n                    </div>\r\n                    <div class=\"input-wrapper\" v-bind:class=\"{ 'ivu-form-item-error': verifyError }\">\r\n                        <div v-show=\"waitShow === false\" id=\"captcha\"></div>\r\n                        <div v-show=\"waitShow\" style=\"height: 32px;color: #000\" id=\"wait\"></div>\r\n                    </div>\r\n                    <div class=\"auto-login\">\r\n                        <Checkbox v-model=\"checked\">自动登录</Checkbox>\r\n                        <a @click=\"forgetPassword\">忘记密码?</a>\r\n                    </div>\r\n                    <Button :loading=\"isShowLoading\" class=\"submit\" type=\"primary\" @click=\"submit\">登陆</Button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import Gt from \"../api/Gt.js\" ;//用于加载id对应的验证码库，并支持宕机模式 * 暴露\r\n  import logo from '../assets/img/logo.png'\r\n  import logoFace from '../assets/img/logo-facepalm.png'\r\n  export default {\r\n    name: 'login',\r\n    data() {\r\n      return {\r\n        logo: logo,\r\n        shake:false,\r\n        waitShow: true,\r\n        captchaObj: {},\r\n        result: {}, // 是否已验证极验\r\n        config: '',\r\n        menu: '',\r\n        account: '',\r\n        password: '',\r\n        checked: true,\r\n        isShowLoading: false,\r\n        accountError: false,\r\n        passwordError: false,\r\n        verifyError: false,\r\n        backgroundImage: this.api.common.bing,\r\n        bg: {}\r\n      }\r\n    },\r\n    created() {\r\n      this.bg.backgroundImage = 'url(' + this.backgroundImage +')'\r\n      this.getInitGtTest()\r\n    },\r\n    watch: {\r\n      $route: {\r\n        handler: function(route) {\r\n          this.redirect = route.query && route.query.redirect\r\n        },\r\n        immediate: true\r\n      }\r\n    },\r\n    methods: {\r\n      getInitGtTest() {\r\n        this.$axios.get(this.api.static.geet + (new Date()).getTime())\r\n          .then(res => {\r\n            if (res.status === 200) {\r\n              const data = res.data\r\n              window.initGeetest({\r\n                gt: data.gt,\r\n                challenge: data.challenge,\r\n                offline: !data.success, // 表示用户后台检测极验服务器是否宕机\r\n                new_captcha: data.new_captcha, // 用于宕机时表示是新验证码的宕机\r\n                product: \"float\", // 产品形式，包括：float，popup\r\n                width: \"100%\",\r\n                https: true\r\n              }, captchaObj => { // 箭头函数 若使用function 使用this报错\r\n                this.captchaObj = captchaObj\r\n                captchaObj.appendTo(\"#captcha\");\r\n                captchaObj.onReady(() => {\r\n                  this.waitShow = false // 隐藏等待提示\r\n                });\r\n                captchaObj.onSuccess(() => {\r\n                  this.verifyError = false\r\n                  this.result = captchaObj.getValidate();\r\n                });\r\n                captchaObj.onError(() => {\r\n                  this.$Message.error(\"出错啦, 请稍后重试!\");\r\n                })\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            window.console.log(err)\r\n          })\r\n      },\r\n      verifyAccount() {\r\n        if (this.account.length < 1) {\r\n          this.$Message.error('用户名必填')\r\n          this.accountError = true\r\n        } else {\r\n          this.accountError = false\r\n        }\r\n      },\r\n      changeLogo() {\r\n        window.console.log(1111)\r\n        this.logo = logoFace\r\n      },\r\n      verifyPassword() {\r\n        // this.logo = logoFace\r\n        this.logo = logo\r\n        if (this.password.length < 1) {\r\n          this.$Message.error('密码必填，我不会偷看的 ＝。＝')\r\n          this.passwordError = true\r\n        } else {\r\n          this.passwordError = false\r\n        }\r\n      },\r\n      forgetPassword() {\r\n        this.$Message.info('请联系您的管理员重置密码')\r\n      },\r\n      submit() {\r\n        if (this.account != '' && this.password != '') {\r\n          if (!this.result.geetest_challenge) {\r\n            this.verifyError = true\r\n            return this.$Message.error(\"请先完成验证\")\r\n          }\r\n          this.$axios.post(this.api.common.login, {\r\n            username: this.account,\r\n            password: this.password,\r\n            geetest_challenge: this.result.geetest_challenge,\r\n            geetest_validate: this.result.geetest_validate,\r\n            geetest_seccode: this.result.geetest_seccode\r\n          }).then((response) => {\r\n              var res = response.data\r\n              if (res.code == 0)\r\n              {\r\n                var data = res.data\r\n                this.isShowLoading = true\r\n                this.userImg = data.avatar\r\n                this.token = data.remember_token\r\n                this.uid = data.id\r\n                this.config = JSON.stringify(data.config)\r\n                this.menu = JSON.stringify(data.menu)\r\n                this.userInfo = JSON.stringify(data.userInfo)\r\n                localStorage.setItem('userImg', this.userImg)\r\n                localStorage.setItem('userName', this.account)\r\n                localStorage.setItem('token', this.token)\r\n                localStorage.setItem('uid', this.uid)\r\n                localStorage.setItem('config', this.config)\r\n                localStorage.setItem('menu', this.menu)\r\n                localStorage.setItem('userInfo', this.userInfo)\r\n                localStorage.setItem('userInfo', this.userInfo)\r\n                localStorage.setItem('uploadBase', this.api.static.baseUrl)\r\n                localStorage.setItem('uploadContent', this.api.common.upload + '?module=content')\r\n                this.$router.push({path: this.redirect || '/'})\r\n              }else{\r\n                this.captchaObj.reset()\r\n                let that = this;\r\n                that.shake = true\r\n                setTimeout(function(){\r\n                  that.shake = false\r\n                }, 500)\r\n                this.result = {}\r\n                this.$Message.error(res.msg);\r\n              }\r\n            }\r\n          )\r\n        } else {\r\n          if (this.account == '') {\r\n            this.$Message.error('用户名不能为空')\r\n            this.accountError = true\r\n          }\r\n          if (this.password == '') {\r\n            this.$Message.error('密码不能为空')\r\n            this.passwordError = true\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n    @import \"../assets/css/shake.css\";\r\n    .login-vue {\r\n        height: 100%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        color: #fff;\r\n        background-repeat: no-repeat;\r\n        background-size:cover;\r\n    }\r\n    .login-vue .container {\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .login-vue .loginBox {\r\n        width: 350px;\r\n        background-color: white;\r\n        box-shadow: 0px 0px 43px -2px rgba(135,130,135,1);\r\n        border-radius: 8px;\r\n        padding: 25px;\r\n        opacity: .7;\r\n    }\r\n    .login-vue .userImage {\r\n        border-radius: 50%;\r\n        overflow: hidden;\r\n        width: 120px;\r\n        height: 120px;\r\n        margin: 10px auto 30px;\r\n        opacity: .7;\r\n    }\r\n    .login-vue img {\r\n        width: 100%;\r\n    }\r\n    .login-vue .input-wrapper {\r\n        position: relative;\r\n    }\r\n    .login-vue .ivu-input {\r\n        width: 100%;\r\n        /*height: 42px;*/\r\n        padding-top: 15px;\r\n        padding-bottom: 15px;\r\n        margin: 10px 0;\r\n        /*font-size: 14px;*/\r\n    }\r\n    .login-vue .ivu-input-icon {\r\n        top: 8px;\r\n    }\r\n    .login-vue .ivu-input-prefix, .login-vue .ivu-input-suffix {\r\n        top: 10px;\r\n    }\r\n    .login-vue .ivu-checkbox-wrapper {\r\n        color: #9a9a9a;\r\n    }\r\n    .login-vue .auto-login a{\r\n        float: right;\r\n    }\r\n    .login-vue .submit {\r\n        width: 100%;\r\n        margin-top: 35px;\r\n        color: white;\r\n        font-weight: lighter;\r\n    }\r\n    #captcha{\r\n        margin: 10px 0 20px;\r\n        height: 32px;\r\n        color: rgb(0, 0, 0);\r\n        overflow: hidden;\r\n        border: 1px solid #dcdee2;\r\n        border-radius: 4px;\r\n    }\r\n    .geetest_holder.geetest_wind {\r\n        margin-top: -6px;\r\n    }\r\n    .geetest_holder.geetest_wind .geetest_radar_btn, .geetest_holder.geetest_wind .geetest_success_btn\r\n    {\r\n        border: none!important;\r\n    }\r\n    .geetest_holder.geetest_wind .geetest_radar_tip, .geetest_holder.geetest_wind .geetest_success_radar_tip\r\n    {\r\n        font-size: 12px!important;\r\n    }\r\n    @media (max-width: 640px)\r\n    {\r\n\r\n        .login-vue .loginBox {\r\n            width: 320px;\r\n        }\r\n    }\r\n</style>\r\n"]}]}