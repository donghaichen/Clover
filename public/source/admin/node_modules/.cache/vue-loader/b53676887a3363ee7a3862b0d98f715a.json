{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/views/marketing/Banner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/views/marketing/Banner.vue","mtime":1574999407000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data () {\n    return {\n      static: this.api.static.baseUrl,\n      value1: 0,\n      type: 'banner',\n      uploadUrl: this.api.common.upload,\n      index: 1,\n      formDynamic: {\n        items: [\n        ]\n      }\n    }\n  },\n  created() {\n    this.uploadUrl = this.uploadUrl + '?module=banner'\n\n    this.$axios.get(this.api.marketing.banner)\n      .then((response) => {\n        if (response.data.code == 0)\n        {\n          this.formDynamic.items = response.data.data\n        }else{\n          this.$Message.error('数据获取失败，请检查');\n        }\n      })\n  },\n  methods: {\n    viewPic (src) {\n      if(src.length <= 0)\n      {\n        this.$Message.error('尚未上传图片，无法查看')\n        return false\n      }\n      const title = '查看图片';\n      const content = '<img style=\"width: 85%\" src=\"' +this.api.static.baseUrl + src +'\">';\n      this.$Modal.info({\n        title: title,\n        content: content\n      });\n    },\n    handleSuccess (response) {\n      var index = response.data.additional.index\n\n      this.formDynamic.items[index].src = response.data.url\n      this.$Message.success('上传成功')\n    },\n    handleSubmit () {\n      this.$axios.post(this.api.marketing.banner, {data: JSON.stringify(this.formDynamic.items)})\n        .then((response) => {\n          if (response.data.code == 0)\n          {\n            this.$Message.success('提交成功');\n          }else{\n            this.$Message.error('提交失败，请重试');\n          }\n        })\n    },\n    handleReset (name) {\n      this.$refs[name].resetFields();\n    },\n  },\n  mounted () {\n  }\n}\n",{"version":3,"sources":["Banner.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Banner.vue","sourceRoot":"src/views/marketing","sourcesContent":["<template>\r\n    <div class=\"content\">\r\n        <Card :bordered=\"false\">\r\n            <p slot=\"title\"></p>\r\n            <Carousel v-model=\"value1\" style=\"width: 1200px;height: 290px;margin: 0 0 50px 100px\" :height=\"290\" autoplay loop>\r\n                <CarouselItem v-for=\"(item, index) in formDynamic.items\" v-if=\"item.status\" >\r\n                    <div class=\"demo-carousel\"><img width=\"1200px\" height=\"290px\" :src=\"static + item.src\"/></div>\r\n                </CarouselItem>\r\n            </Carousel>\r\n            <Form ref=\"formDynamic\" :model=\"formDynamic\" :label-width=\"80\" style=\"100%\">\r\n                <FormItem\r\n                        v-for=\"(item, index) in formDynamic.items\"\r\n                        :key=\"index\"\r\n                        :label=\"'Bannner ' + item.index\"\r\n                        :rules=\"{}\"\r\n                >\r\n                    <Row>\r\n                        <Col span=\"1\" style=\"text-align: center\">图片</Col>\r\n                        <Col span=\"6\">\r\n                            <Input type=\"text\" disabled v-model=\"item.src\" placeholder=\"图片\"></Input>\r\n                        </Col>\r\n                        <Col span=\"1\" style=\"text-align: center\">链接</Col>\r\n                        <Col span=\"6\">\r\n                            <Input type=\"text\" v-model=\"item.href\" placeholder=\"链接\"></Input>\r\n                        </Col>\r\n                        <Col span=\"1\" style=\"text-align: center\">排序</Col>\r\n                        <Col span=\"1\">\r\n                            <Input type=\"text\" v-model=\"item.sort\" placeholder=\"排序\"></Input>\r\n                        </Col>\r\n                        <Col span=\"1\" style=\"text-align: center\">状态</Col>\r\n                        <Col span=\"1\">\r\n                            <i-switch v-model=\"item.status\" size=\"large\">\r\n                                <span slot=\"open\">开启</span>\r\n                                <span slot=\"close\">关闭</span>\r\n                            </i-switch>\r\n                        </Col>\r\n                        <div style=\"display: none\"><Input v-model=\"type\" type=\"text\"></Input></div>\r\n                    </Row>\r\n                    <p style=\"    padding: 10px;\r\n    width: 200px;\r\n    padding-left: 62px;\">\r\n                        <Upload\r\n                                :data=\"{index:item.index - 1}\"\r\n                                :show-upload-list=\"false\"\r\n                                :on-success=\"handleSuccess\"\r\n                                :action=\"uploadUrl\"\r\n                        >\r\n                            <Button icon=\"ios-cloud-upload-outline\">上传</Button>\r\n                        </Upload>\r\n                        <Button style=\"margin-left: 100px;margin-top: -68px;\" @click=\"viewPic(item.src)\">查看图片</Button>\r\n                    </p>\r\n                </FormItem>\r\n                <FormItem>\r\n                    <Button type=\"primary\" @click=\"handleSubmit('formDynamic')\">提交</Button>\r\n                    <Button @click=\"handleReset('formDynamic')\" style=\"margin-left: 8px\">重置</Button>\r\n                </FormItem>\r\n            </Form>\r\n        </Card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data () {\r\n      return {\r\n        static: this.api.static.baseUrl,\r\n        value1: 0,\r\n        type: 'banner',\r\n        uploadUrl: this.api.common.upload,\r\n        index: 1,\r\n        formDynamic: {\r\n          items: [\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.uploadUrl = this.uploadUrl + '?module=banner'\r\n\r\n      this.$axios.get(this.api.marketing.banner)\r\n        .then((response) => {\r\n          if (response.data.code == 0)\r\n          {\r\n            this.formDynamic.items = response.data.data\r\n          }else{\r\n            this.$Message.error('数据获取失败，请检查');\r\n          }\r\n        })\r\n    },\r\n    methods: {\r\n      viewPic (src) {\r\n        if(src.length <= 0)\r\n        {\r\n          this.$Message.error('尚未上传图片，无法查看')\r\n          return false\r\n        }\r\n        const title = '查看图片';\r\n        const content = '<img style=\"width: 85%\" src=\"' +this.api.static.baseUrl + src +'\">';\r\n        this.$Modal.info({\r\n          title: title,\r\n          content: content\r\n        });\r\n      },\r\n      handleSuccess (response) {\r\n        var index = response.data.additional.index\r\n\r\n        this.formDynamic.items[index].src = response.data.url\r\n        this.$Message.success('上传成功')\r\n      },\r\n      handleSubmit () {\r\n        this.$axios.post(this.api.marketing.banner, {data: JSON.stringify(this.formDynamic.items)})\r\n          .then((response) => {\r\n            if (response.data.code == 0)\r\n            {\r\n              this.$Message.success('提交成功');\r\n            }else{\r\n              this.$Message.error('提交失败，请重试');\r\n            }\r\n          })\r\n      },\r\n      handleReset (name) {\r\n        this.$refs[name].resetFields();\r\n      },\r\n    },\r\n    mounted () {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}