{"remainingRequest":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/home/donghai/Desktop/www/clover/public/source/admin/src/components/Tinymce.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/donghai/Desktop/www/clover/public/source/admin/src/components/Tinymce.vue","mtime":1575000418000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donghai/Desktop/www/clover/public/source/admin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.tox-tinymce{\n    min-height: 200px!important;\n}\n",{"version":3,"sources":["Tinymce.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA","file":"Tinymce.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"tinymce-editor\">\r\n        <editor v-model=\"myValue\"\r\n                :init=\"init\"\r\n                :disabled=\"disabled\"\r\n                @onClick=\"onClick\">\r\n        </editor>\r\n    </div>\r\n</template>\r\n<script>\r\n  import tinymce from 'tinymce/tinymce'\r\n  import Editor from '@tinymce/tinymce-vue'\r\n  import 'tinymce/themes/silver'\r\n  // 编辑器插件plugins\r\n  // 更多插件参考：https://www.tiny.cloud/docs/plugins/\r\n  import 'tinymce/plugins/image'// 插入上传图片插件\r\n  import 'tinymce/plugins/media'// 插入视频插件\r\n  import 'tinymce/plugins/table'// 插入表格插件\r\n  import 'tinymce/plugins/lists'// 列表插件\r\n  import 'tinymce/plugins/wordcount'// 字数统计插件\r\n  import 'tinymce/plugins/autoresize'// 字数统计插件\r\n  import 'tinymce/plugins/fullscreen'// 字数统计插件\r\n  export default {\r\n    components: {\r\n      Editor\r\n    },\r\n    props: {\r\n      value: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      disabled: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      plugins: {\r\n        type: [String, Array],\r\n        default: 'lists image media table wordcount autoresize fullscreen'\r\n      },\r\n      toolbar: {\r\n        type: [String, Array],\r\n        default: 'undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat fullscreen'\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        uploadUrl: this.api.common.upload + '?module=content',\r\n        init: {\r\n          language_url: '/tinymce/langs/zh_CN.js',\r\n          language: 'zh_CN',\r\n          skin_url: '/tinymce/skins/ui/oxide',\r\n          // skin_url: '/tinymce/skins/ui/oxide-dark',//暗色系\r\n          height: 300,\r\n          plugins: this.plugins,\r\n          toolbar: this.toolbar,\r\n          branding: false,\r\n          menubar: false,\r\n          // 此处为图片上传处理函数，这个直接用了base64的图片形式上传图片，\r\n          // 如需ajax上传可参考https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_handler\r\n          // images_upload_handler: (blobInfo, success, failure) => {\r\n          //   const img = 'data:image/jpeg;base64,' + blobInfo.base64()\r\n          //   success(img)\r\n          // }\r\n          images_upload_handler: function (blobInfo, success, failure) {\r\n            var xhr, formData;\r\n\r\n            xhr = new XMLHttpRequest();\r\n            xhr.withCredentials = false;\r\n            xhr.open('POST', localStorage.getItem('uploadContent'));\r\n\r\n            xhr.onload = function() {\r\n              var json;\r\n\r\n              if (xhr.status != 200) {\r\n                failure('HTTP Error: ' + xhr.status);\r\n                return;\r\n              }\r\n\r\n              json = JSON.parse(xhr.responseText);\r\n\r\n              if (!json || typeof json.data.url != 'string') {\r\n                failure('Invalid JSON: ' + xhr.responseText);\r\n                return;\r\n              }\r\n\r\n              success(localStorage.getItem('uploadBase') + json.data.url);\r\n            };\r\n\r\n            formData = new FormData();\r\n            formData.append('file', blobInfo.blob(), blobInfo.filename());\r\n\r\n            xhr.send(formData);\r\n          }\r\n        },\r\n        myValue: this.value\r\n      }\r\n    },\r\n    created(){\r\n      this.uploadUrl = this.uploadUrl + '?module=content'\r\n    },\r\n    mounted () {\r\n      tinymce.init({})\r\n    },\r\n    methods: {\r\n      // 添加相关的事件，可用的事件参照文档=> https://github.com/tinymce/tinymce-vue => All available events\r\n      // 需要什么事件可以自己增加\r\n      onClick (e) {\r\n        this.$emit('onClick', e, tinymce)\r\n      },\r\n      // 可以添加一些自己的自定义事件，如清空内容\r\n      clear () {\r\n        this.myValue = ''\r\n      }\r\n    },\r\n    watch: {\r\n      value (newValue) {\r\n        this.myValue = newValue\r\n      },\r\n      myValue (newValue) {\r\n        this.$emit('input', newValue)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n    .tox-tinymce{\r\n        min-height: 200px!important;\r\n    }\r\n    </style>\r\n"]}]}